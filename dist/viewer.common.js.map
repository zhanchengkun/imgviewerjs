{"version":3,"file":"viewer.common.js","sources":["../src/js/defaults.js","../src/js/template.js","../src/js/constants.js","../src/js/utilities.js","../src/js/render.js","../src/js/events.js","../src/js/handlers.js","../src/js/methods.js","../src/js/others.js","../src/js/viewer.js"],"sourcesContent":["export default {\n  /**\n   * Enable a modal backdrop, specify `static` for a backdrop\n   * which doesn't close the modal on click.\n   * @type {boolean}\n   */\n  backdrop: true,\n\n  /**\n   * Show the button on the top-right of the viewer.\n   * @type {boolean}\n   */\n  button: true,\n\n  /**\n   * Show the navbar.\n   * @type {boolean | number}\n   */\n  navbar: true,\n\n  /**\n   * Specify the visibility and the content of the title.\n   * @type {boolean | number | Function | Array}\n   */\n  title: true,\n\n  /**\n   * Show the toolbar.\n   * @type {boolean | number | Object}\n   */\n  toolbar: true,\n\n  /**\n   * Custom class name(s) to add to the viewer's root element.\n   * @type {string}\n   */\n  className: '',\n\n  /**\n   * Define where to put the viewer in modal mode.\n   * @type {string | Element}\n   */\n  container: 'body',\n\n  /**\n   * Filter the images for viewing. Return true if the image is viewable.\n   * @type {Function}\n   */\n  filter: null,\n\n  /**\n   * Enable to request fullscreen when play.\n   * @type {boolean}\n   */\n  fullscreen: true,\n\n  /**\n   * Define the extra attributes to inherit from the original image.\n   * @type {Array}\n   */\n  inheritedAttributes: [\n    'crossOrigin',\n    'decoding',\n    'isMap',\n    'loading',\n    'referrerPolicy',\n    'sizes',\n    'srcset',\n    'useMap',\n  ],\n\n  /**\n   * Define the initial index of image for viewing.\n   * @type {number}\n   */\n  initialViewIndex: 0,\n\n  /**\n   * Enable inline mode.\n   * @type {boolean}\n   */\n  inline: false,\n\n  /**\n   * The amount of time to delay between automatically cycling an image when playing.\n   * @type {number}\n   */\n  interval: 5000,\n\n  /**\n   * Enable keyboard support.\n   * @type {boolean}\n   */\n  keyboard: true,\n\n  /**\n   * Indicate if show a loading spinner when load image or not.\n   * @type {boolean}\n   */\n  loading: true,\n\n  /**\n   * Indicate if enable loop viewing or not.\n   * @type {boolean}\n   */\n  loop: true,\n\n  /**\n   * Min width of the viewer in inline mode.\n   * @type {number}\n   */\n  minWidth: 200,\n\n  /**\n   * Min height of the viewer in inline mode.\n   * @type {number}\n   */\n  minHeight: 100,\n\n  /**\n   * Enable to move the image.\n   * @type {boolean}\n   */\n  movable: true,\n\n  /**\n   * Enable to rotate the image.\n   * @type {boolean}\n   */\n  rotatable: true,\n\n  /**\n   * Enable to scale the image.\n   * @type {boolean}\n   */\n  scalable: true,\n\n  /**\n   * Enable to zoom the image.\n   * @type {boolean}\n   */\n  zoomable: true,\n\n  /**\n   * Enable to zoom the current image by dragging on the touch screen.\n   * @type {boolean}\n   */\n  zoomOnTouch: true,\n\n  /**\n   * Enable to zoom the image by wheeling mouse.\n   * @type {boolean}\n   */\n  zoomOnWheel: true,\n\n  /**\n   * Enable to slide to the next or previous image by swiping on the touch screen.\n   * @type {boolean}\n   */\n  slideOnTouch: true,\n\n  /**\n   * Indicate if toggle the image size between its natural size\n   * and initial size when double click on the image or not.\n   * @type {boolean}\n   */\n  toggleOnDblclick: true,\n\n  /**\n   * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n   * @type {boolean}\n   */\n  tooltip: true,\n\n  /**\n   * Enable CSS3 Transition for some special elements.\n   * @type {boolean}\n   */\n  transition: true,\n\n  /**\n   * Define the CSS `z-index` value of viewer in modal mode.\n   * @type {number}\n   */\n  zIndex: 2015,\n\n  /**\n   * Define the CSS `z-index` value of viewer in inline mode.\n   * @type {number}\n   */\n  zIndexInline: 0,\n\n  /**\n   * Define the ratio when zoom the image by wheeling mouse.\n   * @type {number}\n   */\n  zoomRatio: 0.1,\n\n  /**\n   * Define the min ratio of the image when zoom out.\n   * @type {number}\n   */\n  minZoomRatio: 0.01,\n\n  /**\n   * Define the max ratio of the image when zoom in.\n   * @type {number}\n   */\n  maxZoomRatio: 100,\n\n  /**\n   * Define where to get the original image URL for viewing.\n   * @type {string | Function}\n   */\n  url: 'src',\n\n  /**\n   * Event shortcuts.\n   * @type {Function}\n   */\n  ready: null,\n  show: null,\n  shown: null,\n  hide: null,\n  hidden: null,\n  view: null,\n  viewed: null,\n  zoom: null,\n  zoomed: null,\n  play: null,\n  stop: null,\n};\n","export default (\n  '<div class=\"viewer-container-custom\"><div class=\"viewer-container\" touch-action=\"none\">'\n    + '<div class=\"viewer-canvas\"></div>'\n    + '<div class=\"viewer-footer\">'\n      + '<div class=\"viewer-title\"></div>'\n      + '<div class=\"viewer-toolbar\"></div>'\n      + '<div class=\"viewer-navbar\">'\n        + '<ul class=\"viewer-list\"></ul>'\n      + '</div>'\n    + '</div>'\n    + '<div class=\"viewer-tooltip\"></div>'\n    + '<div role=\"button\" class=\"viewer-button\" data-viewer-action=\"mix\"></div>'\n    + '<div class=\"viewer-player\"></div>'\n  + '</div></div>'\n);\n","export const IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nexport const WINDOW = IS_BROWSER ? window : {};\nexport const IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\nexport const HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\nexport const NAMESPACE = 'viewer';\n\n// Actions\nexport const ACTION_MOVE = 'move';\nexport const ACTION_SWITCH = 'switch';\nexport const ACTION_ZOOM = 'zoom';\n\n// Classes\nexport const CLASS_ACTIVE = `${NAMESPACE}-active`;\nexport const CLASS_CLOSE = `${NAMESPACE}-close`;\nexport const CLASS_FADE = `${NAMESPACE}-fade`;\nexport const CLASS_FIXED = `${NAMESPACE}-fixed`;\nexport const CLASS_FULLSCREEN = `${NAMESPACE}-fullscreen`;\nexport const CLASS_FULLSCREEN_EXIT = `${NAMESPACE}-fullscreen-exit`;\nexport const CLASS_HIDE = `${NAMESPACE}-hide`;\nexport const CLASS_HIDE_MD_DOWN = `${NAMESPACE}-hide-md-down`;\nexport const CLASS_HIDE_SM_DOWN = `${NAMESPACE}-hide-sm-down`;\nexport const CLASS_HIDE_XS_DOWN = `${NAMESPACE}-hide-xs-down`;\nexport const CLASS_IN = `${NAMESPACE}-in`;\nexport const CLASS_INVISIBLE = `${NAMESPACE}-invisible`;\nexport const CLASS_LOADING = `${NAMESPACE}-loading`;\nexport const CLASS_MOVE = `${NAMESPACE}-move`;\nexport const CLASS_OPEN = `${NAMESPACE}-open`;\nexport const CLASS_SHOW = `${NAMESPACE}-show`;\nexport const CLASS_TRANSITION = `${NAMESPACE}-transition`;\n\n// Events\nexport const EVENT_CLICK = 'click';\nexport const EVENT_DBLCLICK = 'dblclick';\nexport const EVENT_DRAG_START = 'dragstart';\nexport const EVENT_HIDDEN = 'hidden';\nexport const EVENT_HIDE = 'hide';\nexport const EVENT_KEY_DOWN = 'keydown';\nexport const EVENT_LOAD = 'load';\nexport const EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\nexport const EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\nexport const EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\nexport const EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\nexport const EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\nexport const EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\nexport const EVENT_READY = 'ready';\nexport const EVENT_RESIZE = 'resize';\nexport const EVENT_SHOW = 'show';\nexport const EVENT_SHOWN = 'shown';\nexport const EVENT_TRANSITION_END = 'transitionend';\nexport const EVENT_VIEW = 'view';\nexport const EVENT_VIEWED = 'viewed';\nexport const EVENT_WHEEL = 'wheel';\nexport const EVENT_ZOOM = 'zoom';\nexport const EVENT_ZOOMED = 'zoomed';\nexport const EVENT_PLAY = 'play';\nexport const EVENT_STOP = 'stop';\n\n// Data keys\nexport const DATA_ACTION = `${NAMESPACE}Action`;\n\n// RegExps\nexport const REGEXP_SPACES = /\\s\\s*/;\n\n// Misc\nexport const BUTTONS = [\n  'zoom-in',\n  'zoom-out',\n  'one-to-one',\n  'reset',\n  'prev',\n  'play',\n  'next',\n  'rotate-left',\n  'rotate-right',\n  'flip-horizontal',\n  'flip-vertical',\n];\n","import {\n  CLASS_HIDE_MD_DOWN,\n  CLASS_HIDE_SM_DOWN,\n  CLASS_HIDE_XS_DOWN,\n  IS_BROWSER,\n  REGEXP_SPACES,\n  WINDOW,\n} from './constants';\n\n/**\n * Check if the given value is a string.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n */\nexport function isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Check if the given value is not a number.\n */\nexport const isNaN = Number.isNaN || WINDOW.isNaN;\n\n/**\n * Check if the given value is a number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\nexport function isNumber(value) {\n  return typeof value === 'number' && !isNaN(value);\n}\n\n/**\n * Check if the given value is undefined.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\nexport function isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\nexport function isObject(value) {\n  return typeof value === 'object' && value !== null;\n}\n\nconst { hasOwnProperty } = Object.prototype;\n\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\nexport function isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n\n  try {\n    const { constructor } = value;\n    const { prototype } = constructor;\n\n    return constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Check if the given value is a function.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Iterate the given data.\n * @param {*} data - The data to iterate.\n * @param {Function} callback - The process function for each element.\n * @returns {*} The original data.\n */\nexport function forEach(data, callback) {\n  if (data && isFunction(callback)) {\n    if (Array.isArray(data) || isNumber(data.length)/* array-like */) {\n      const { length } = data;\n      let i;\n\n      for (i = 0; i < length; i += 1) {\n        if (callback.call(data, data[i], i, data) === false) {\n          break;\n        }\n      }\n    } else if (isObject(data)) {\n      Object.keys(data).forEach((key) => {\n        callback.call(data, data[key], key, data);\n      });\n    }\n  }\n\n  return data;\n}\n\n/**\n * Extend the given object.\n * @param {*} obj - The object to be extended.\n * @param {*} args - The rest objects which will be merged to the first object.\n * @returns {Object} The extended object.\n */\nexport const assign = Object.assign || function assign(obj, ...args) {\n  if (isObject(obj) && args.length > 0) {\n    args.forEach((arg) => {\n      if (isObject(arg)) {\n        Object.keys(arg).forEach((key) => {\n          obj[key] = arg[key];\n        });\n      }\n    });\n  }\n\n  return obj;\n};\n\nconst REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n\n/**\n * Apply styles to the given element.\n * @param {Element} element - The target element.\n * @param {Object} styles - The styles for applying.\n */\nexport function setStyle(element, styles) {\n  const { style } = element;\n\n  forEach(styles, (value, property) => {\n    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n      value += 'px';\n    }\n\n    style[property] = value;\n  });\n}\n\n/**\n * Escape a string for using in HTML.\n * @param {String} value - The string to escape.\n * @returns {String} Returns the escaped string.\n */\nexport function escapeHTMLEntities(value) {\n  return isString(value) ? value\n    .replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;') : value;\n}\n\n/**\n * Check if the given element has a special class.\n * @param {Element} element - The element to check.\n * @param {string} value - The class to search.\n * @returns {boolean} Returns `true` if the special class was found.\n */\nexport function hasClass(element, value) {\n  if (!element || !value) {\n    return false;\n  }\n\n  return element.classList\n    ? element.classList.contains(value)\n    : element.className.indexOf(value) > -1;\n}\n\n/**\n * Add classes to the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be added.\n */\nexport function addClass(element, value) {\n  if (!element || !value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, (elem) => {\n      addClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.add(value);\n    return;\n  }\n\n  const className = element.className.trim();\n\n  if (!className) {\n    element.className = value;\n  } else if (className.indexOf(value) < 0) {\n    element.className = `${className} ${value}`;\n  }\n}\n\n/**\n * Remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be removed.\n */\nexport function removeClass(element, value) {\n  if (!element || !value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, (elem) => {\n      removeClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(value);\n    return;\n  }\n\n  if (element.className.indexOf(value) >= 0) {\n    element.className = element.className.replace(value, '');\n  }\n}\n\n/**\n * Add or remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be toggled.\n * @param {boolean} added - Add only.\n */\nexport function toggleClass(element, value, added) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, (elem) => {\n      toggleClass(elem, value, added);\n    });\n    return;\n  }\n\n  // IE10-11 doesn't support the second parameter of `classList.toggle`\n  if (added) {\n    addClass(element, value);\n  } else {\n    removeClass(element, value);\n  }\n}\n\nconst REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n\n/**\n * Transform the given string from camelCase to kebab-case\n * @param {string} value - The value to transform.\n * @returns {string} The transformed value.\n */\nexport function hyphenate(value) {\n  return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n}\n\n/**\n * Get data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to get.\n * @returns {string} The data value.\n */\nexport function getData(element, name) {\n  if (isObject(element[name])) {\n    return element[name];\n  }\n\n  if (element.dataset) {\n    return element.dataset[name];\n  }\n\n  return element.getAttribute(`data-${hyphenate(name)}`);\n}\n\n/**\n * Set data to the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to set.\n * @param {string} data - The data value.\n */\nexport function setData(element, name, data) {\n  if (isObject(data)) {\n    element[name] = data;\n  } else if (element.dataset) {\n    element.dataset[name] = data;\n  } else {\n    element.setAttribute(`data-${hyphenate(name)}`, data);\n  }\n}\n\n/**\n * Remove data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to remove.\n */\nexport function removeData(element, name) {\n  if (isObject(element[name])) {\n    try {\n      delete element[name];\n    } catch (error) {\n      element[name] = undefined;\n    }\n  } else if (element.dataset) {\n    // #128 Safari not allows to delete dataset property\n    try {\n      delete element.dataset[name];\n    } catch (error) {\n      element.dataset[name] = undefined;\n    }\n  } else {\n    element.removeAttribute(`data-${hyphenate(name)}`);\n  }\n}\n\nconst onceSupported = (() => {\n  let supported = false;\n\n  if (IS_BROWSER) {\n    let once = false;\n    const listener = () => {};\n    const options = Object.defineProperty({}, 'once', {\n      get() {\n        supported = true;\n        return once;\n      },\n\n      /**\n       * This setter can fix a `TypeError` in strict mode\n       * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n       * @param {boolean} value - The value to set\n       */\n      set(value) {\n        once = value;\n      },\n    });\n\n    WINDOW.addEventListener('test', listener, options);\n    WINDOW.removeEventListener('test', listener, options);\n  }\n\n  return supported;\n})();\n\n/**\n * Remove event listener from the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nexport function removeListener(element, type, listener, options = {}) {\n  let handler = listener;\n\n  type.trim().split(REGEXP_SPACES).forEach((event) => {\n    if (!onceSupported) {\n      const { listeners } = element;\n\n      if (listeners && listeners[event] && listeners[event][listener]) {\n        handler = listeners[event][listener];\n        delete listeners[event][listener];\n\n        if (Object.keys(listeners[event]).length === 0) {\n          delete listeners[event];\n        }\n\n        if (Object.keys(listeners).length === 0) {\n          delete element.listeners;\n        }\n      }\n    }\n\n    element.removeEventListener(event, handler, options);\n  });\n}\n\n/**\n * Add event listener to the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nexport function addListener(element, type, listener, options = {}) {\n  let handler = listener;\n\n  type.trim().split(REGEXP_SPACES).forEach((event) => {\n    if (options.once && !onceSupported) {\n      const { listeners = {} } = element;\n\n      handler = (...args) => {\n        delete listeners[event][listener];\n        element.removeEventListener(event, handler, options);\n        listener.apply(element, args);\n      };\n\n      if (!listeners[event]) {\n        listeners[event] = {};\n      }\n\n      if (listeners[event][listener]) {\n        element.removeEventListener(event, listeners[event][listener], options);\n      }\n\n      listeners[event][listener] = handler;\n      element.listeners = listeners;\n    }\n\n    element.addEventListener(event, handler, options);\n  });\n}\n\n/**\n * Dispatch event on the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Object} data - The additional event data.\n * @param {Object} options - The additional event options.\n * @returns {boolean} Indicate if the event is default prevented or not.\n */\nexport function dispatchEvent(element, type, data, options) {\n  let event;\n\n  // Event and CustomEvent on IE9-11 are global objects, not constructors\n  if (isFunction(Event) && isFunction(CustomEvent)) {\n    event = new CustomEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      detail: data,\n      ...options,\n    });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, data);\n  }\n\n  return element.dispatchEvent(event);\n}\n\n/**\n * Get the offset base on the document.\n * @param {Element} element - The target element.\n * @returns {Object} The offset data.\n */\nexport function getOffset(element) {\n  const box = element.getBoundingClientRect();\n\n  return {\n    left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n    top: box.top + (window.pageYOffset - document.documentElement.clientTop),\n  };\n}\n\n/**\n * Get transforms base on the given object.\n * @param {Object} obj - The target object.\n * @returns {string} A string contains transform values.\n */\nexport function getTransforms({\n  rotate,\n  scaleX,\n  scaleY,\n  translateX,\n  translateY,\n}) {\n  const values = [];\n\n  if (isNumber(translateX) && translateX !== 0) {\n    values.push(`translateX(${translateX}px)`);\n  }\n\n  if (isNumber(translateY) && translateY !== 0) {\n    values.push(`translateY(${translateY}px)`);\n  }\n\n  // Rotate should come first before scale to match orientation transform\n  if (isNumber(rotate) && rotate !== 0) {\n    values.push(`rotate(${rotate}deg)`);\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    values.push(`scaleX(${scaleX})`);\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    values.push(`scaleY(${scaleY})`);\n  }\n\n  const transform = values.length ? values.join(' ') : 'none';\n\n  return {\n    WebkitTransform: transform,\n    msTransform: transform,\n    transform,\n  };\n}\n\n/**\n * Get an image name from an image url.\n * @param {string} url - The target url.\n * @example\n * // picture.jpg\n * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280×960')\n * @returns {string} A string contains the image name.\n */\nexport function getImageNameFromURL(url) {\n  return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n}\n\nconst IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n/**\n * Get an image's natural sizes.\n * @param {string} image - The target image.\n * @param {Object} options - The viewer options.\n * @param {Function} callback - The callback function.\n * @returns {HTMLImageElement} The new image.\n */\nexport function getImageNaturalSizes(image, options, callback) {\n  const newImage = document.createElement('img');\n\n  // Modern browsers (except Safari)\n  if (image.naturalWidth && !IS_SAFARI) {\n    callback(image.naturalWidth, image.naturalHeight);\n    return newImage;\n  }\n\n  const body = document.body || document.documentElement;\n\n  newImage.onload = () => {\n    callback(newImage.width, newImage.height);\n\n    if (!IS_SAFARI) {\n      body.removeChild(newImage);\n    }\n  };\n\n  forEach(options.inheritedAttributes, (name) => {\n    const value = image.getAttribute(name);\n\n    if (value !== null) {\n      newImage.setAttribute(name, value);\n    }\n  });\n\n  newImage.src = image.src;\n\n  // iOS Safari will convert the image automatically\n  // with its orientation once append it into DOM\n  if (!IS_SAFARI) {\n    newImage.style.cssText = (\n      'left:0;'\n      + 'max-height:none!important;'\n      + 'max-width:none!important;'\n      + 'min-height:0!important;'\n      + 'min-width:0!important;'\n      + 'opacity:0;'\n      + 'position:absolute;'\n      + 'top:0;'\n      + 'z-index:-1;'\n    );\n    body.appendChild(newImage);\n  }\n\n  return newImage;\n}\n\n/**\n * Get the related class name of a responsive type number.\n * @param {string} type - The responsive type.\n * @returns {string} The related class name.\n */\nexport function getResponsiveClass(type) {\n  switch (type) {\n    case 2:\n      return CLASS_HIDE_XS_DOWN;\n\n    case 3:\n      return CLASS_HIDE_SM_DOWN;\n\n    case 4:\n      return CLASS_HIDE_MD_DOWN;\n\n    default:\n      return '';\n  }\n}\n\n/**\n * Get the max ratio of a group of pointers.\n * @param {string} pointers - The target pointers.\n * @returns {number} The result ratio.\n */\nexport function getMaxZoomRatio(pointers) {\n  const pointers2 = { ...pointers };\n  const ratios = [];\n\n  forEach(pointers, (pointer, pointerId) => {\n    delete pointers2[pointerId];\n\n    forEach(pointers2, (pointer2) => {\n      const x1 = Math.abs(pointer.startX - pointer2.startX);\n      const y1 = Math.abs(pointer.startY - pointer2.startY);\n      const x2 = Math.abs(pointer.endX - pointer2.endX);\n      const y2 = Math.abs(pointer.endY - pointer2.endY);\n      const z1 = Math.sqrt((x1 * x1) + (y1 * y1));\n      const z2 = Math.sqrt((x2 * x2) + (y2 * y2));\n      const ratio = (z2 - z1) / z1;\n\n      ratios.push(ratio);\n    });\n  });\n\n  ratios.sort((a, b) => Math.abs(a) < Math.abs(b));\n\n  return ratios[0];\n}\n\n/**\n * Get a pointer from an event object.\n * @param {Object} event - The target event object.\n * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n * @returns {Object} The result pointer contains start and/or end point coordinates.\n */\nexport function getPointer({ pageX, pageY }, endOnly) {\n  const end = {\n    endX: pageX,\n    endY: pageY,\n  };\n\n  return endOnly ? end : ({\n    timeStamp: Date.now(),\n    startX: pageX,\n    startY: pageY,\n    ...end,\n  });\n}\n\n/**\n * Get the center point coordinate of a group of pointers.\n * @param {Object} pointers - The target pointers.\n * @returns {Object} The center point coordinate.\n */\nexport function getPointersCenter(pointers) {\n  let pageX = 0;\n  let pageY = 0;\n  let count = 0;\n\n  forEach(pointers, ({ startX, startY }) => {\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n\n  pageX /= count;\n  pageY /= count;\n\n  return {\n    pageX,\n    pageY,\n  };\n}\n","import {\n  CLASS_LOADING,\n  CLASS_TRANSITION,\n  EVENT_LOAD,\n  EVENT_TRANSITION_END,\n  EVENT_VIEWED,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  forEach,\n  getImageNameFromURL,\n  getImageNaturalSizes,\n  getTransforms,\n  removeClass,\n  removeListener,\n  setData,\n  setStyle,\n} from './utilities';\n\nexport default {\n  render() {\n    this.initContainer();\n    this.initViewer();\n    this.initList();\n    this.renderViewer();\n  },\n\n  initBody() {\n    const { ownerDocument } = this.element;\n    const body = ownerDocument.body || ownerDocument.documentElement;\n\n    this.body = body;\n    this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n    this.initialBodyPaddingRight = body.style.paddingRight;\n    this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n  },\n\n  initContainer() {\n    this.containerData = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    }; \n  //  if(this.options.width){\n  //   this.containerData.width=this.options.width\n  //  }\n\n  //   if(this.options.height){\n  //     this.containerData.height=this.options.height\n  //   }\n  },\n\n  initViewer() {\n    const { options, parent } = this;\n    let viewerData;\n\n    if (options.inline) {\n      viewerData = {\n        width: Math.max(parent.offsetWidth, options.minWidth),\n        height: Math.max(parent.offsetHeight, options.minHeight),\n      };\n\n      this.parentData = viewerData;\n    }\n\n    if (this.fulled || !viewerData) {\n      viewerData = this.containerData;\n    }\n\n    this.viewerData = assign({}, viewerData);\n  },\n\n  renderViewer() {\n    if (this.options.inline && !this.fulled) {\n      setStyle(this.viewer, this.viewerData);\n    }\n  },\n\n  initList() {\n    const { element, options, list } = this;\n    const items = [];\n\n    // initList may be called in this.update, so should keep idempotent\n    list.innerHTML = '';\n\n    forEach(this.images, (image, index) => {\n      const { src } = image;\n      const alt = image.alt || getImageNameFromURL(src);\n      const url = this.getImageURL(image);\n\n      if (src || url) {\n        const item = document.createElement('li');\n        const img = document.createElement('img');\n\n        forEach(options.inheritedAttributes, (name) => {\n          const value = image.getAttribute(name);\n\n          if (value !== null) {\n            img.setAttribute(name, value);\n          }\n        });\n\n        img.src = src || url;\n        img.alt = alt;\n        img.setAttribute('data-index', index);\n        img.setAttribute('data-original-url', url || src);\n        img.setAttribute('data-viewer-action', 'view');\n        img.setAttribute('role', 'button');\n        item.appendChild(img);\n        list.appendChild(item);\n        items.push(item);\n      }\n    });\n\n    this.items = items;\n\n    forEach(items, (item) => {\n      const image = item.firstElementChild;\n\n      setData(image, 'filled', true);\n\n      if (options.loading) {\n        addClass(item, CLASS_LOADING);\n      }\n\n      addListener(image, EVENT_LOAD, (event) => {\n        if (options.loading) {\n          removeClass(item, CLASS_LOADING);\n        }\n\n        this.loadImage(event);\n      }, {\n        once: true,\n      });\n    });\n\n    if (options.transition) {\n      addListener(element, EVENT_VIEWED, () => {\n        addClass(list, CLASS_TRANSITION);\n      }, {\n        once: true,\n      });\n    }\n  },\n\n  renderList(index) {\n    const i = index || this.index;\n    const width = this.items[i].offsetWidth || 30;\n    const outerWidth = width + 1; // 1 pixel of `margin-left` width\n\n    // Place the active item in the center of the screen\n    setStyle(this.list, assign({\n      width: outerWidth * this.length,\n    }, getTransforms({\n      translateX: ((this.viewerData.width - width) / 2) - (outerWidth * i),\n    })));\n  },\n\n  resetList() {\n    const { list } = this;\n\n    list.innerHTML = '';\n    removeClass(list, CLASS_TRANSITION);\n    setStyle(list, getTransforms({\n      translateX: 0,\n    }));\n  },\n\n  initImage(done) {\n    const { options, image, viewerData } = this;\n    const footerHeight = this.footer.offsetHeight;\n    const viewerWidth = viewerData.width;\n    const viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n    const oldImageData = this.imageData || {};\n    let sizingImage;\n\n    this.imageInitializing = {\n      abort: () => {\n        sizingImage.onload = null;\n      },\n    };\n\n    sizingImage = getImageNaturalSizes(image, options, (naturalWidth, naturalHeight) => {\n      const aspectRatio = naturalWidth / naturalHeight;\n      let width = viewerWidth;\n      let height = viewerHeight;\n\n      this.imageInitializing = false;\n\n      if (viewerHeight * aspectRatio > viewerWidth) {\n        height = viewerWidth / aspectRatio;\n      } else {\n        width = viewerHeight * aspectRatio;\n      }\n\n      width = Math.min(width * 0.9, naturalWidth);\n      height = Math.min(height * 0.9, naturalHeight);\n\n      const imageData = {\n        naturalWidth,\n        naturalHeight,\n        aspectRatio,\n        ratio: width / naturalWidth,\n        width,\n        height,\n        left: (viewerWidth - width) / 2,\n        top: (viewerHeight - height) / 2,\n      };\n      const initialImageData = assign({}, imageData);\n\n      if (options.rotatable) {\n        imageData.rotate = oldImageData.rotate || 0;\n        initialImageData.rotate = 0;\n      }\n\n      if (options.scalable) {\n        imageData.scaleX = oldImageData.scaleX || 1;\n        imageData.scaleY = oldImageData.scaleY || 1;\n        initialImageData.scaleX = 1;\n        initialImageData.scaleY = 1;\n      }\n\n      this.imageData = imageData;\n      this.initialImageData = initialImageData;\n\n      if (done) {\n        done();\n      }\n    });\n  },\n\n  renderImage(done) {\n    const { image, imageData } = this;\n\n    setStyle(image, assign({\n      width: imageData.width,\n      height: imageData.height,\n\n      // XXX: Not to use translateX/Y to avoid image shaking when zooming\n      marginLeft: imageData.left,\n      marginTop: imageData.top,\n    }, getTransforms(imageData)));\n\n    if (done) {\n      if ((this.viewing || this.zooming) && this.options.transition) {\n        const onTransitionEnd = () => {\n          this.imageRendering = false;\n          done();\n        };\n\n        this.imageRendering = {\n          abort: () => {\n            removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n          },\n        };\n\n        addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n          once: true,\n        });\n      } else {\n        done();\n      }\n    }\n  },\n\n  resetImage() {\n    // this.image only defined after viewed\n    if (this.viewing || this.viewed) {\n      const { image } = this;\n\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      image.parentNode.removeChild(image);\n      this.image = null;\n    }\n  },\n};\n","import {\n  EVENT_CLICK,\n  EVENT_DBLCLICK,\n  EVENT_DRAG_START,\n  EVENT_KEY_DOWN,\n  EVENT_POINTER_DOWN,\n  EVENT_POINTER_MOVE,\n  EVENT_POINTER_UP,\n  EVENT_RESIZE,\n  EVENT_WHEEL,\n} from './constants';\nimport {\n  addListener,\n  removeListener,\n} from './utilities';\n\nexport default {\n  bind() {\n    const { options, viewer, canvas } = this;\n    const document = this.element.ownerDocument;\n\n    addListener(viewer, EVENT_CLICK, (this.onClick = this.click.bind(this)));\n    addListener(viewer, EVENT_DRAG_START, (this.onDragStart = this.dragstart.bind(this)));\n    addListener(canvas, EVENT_POINTER_DOWN, (this.onPointerDown = this.pointerdown.bind(this)));\n    addListener(document, EVENT_POINTER_MOVE, (this.onPointerMove = this.pointermove.bind(this)));\n    addListener(document, EVENT_POINTER_UP, (this.onPointerUp = this.pointerup.bind(this)));\n    addListener(document, EVENT_KEY_DOWN, (this.onKeyDown = this.keydown.bind(this)));\n    addListener(window, EVENT_RESIZE, (this.onResize = this.resize.bind(this)));\n\n    if (options.zoomable && options.zoomOnWheel) {\n      addListener(viewer, EVENT_WHEEL, (this.onWheel = this.wheel.bind(this)), {\n        passive: false,\n        capture: true,\n      });\n    }\n\n    if (options.toggleOnDblclick) {\n      addListener(canvas, EVENT_DBLCLICK, (this.onDblclick = this.dblclick.bind(this)));\n    }\n  },\n\n  unbind() {\n    const { options, viewer, canvas } = this;\n    const document = this.element.ownerDocument;\n\n    removeListener(viewer, EVENT_CLICK, this.onClick);\n    removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n    removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n    removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n    removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n    removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n    removeListener(window, EVENT_RESIZE, this.onResize);\n\n    if (options.zoomable && options.zoomOnWheel) {\n      removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n        passive: false,\n        capture: true,\n      });\n    }\n\n    if (options.toggleOnDblclick) {\n      removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n    }\n  },\n};\n","import {\n  ACTION_MOVE,\n  ACTION_SWITCH,\n  ACTION_ZOOM,\n  CLASS_INVISIBLE,\n  CLASS_LOADING,\n  CLASS_MOVE,\n  CLASS_TRANSITION,\n  DATA_ACTION,\n  EVENT_CLICK,\n  EVENT_DBLCLICK,\n  EVENT_LOAD,\n  EVENT_VIEWED,\n  IS_TOUCH_DEVICE,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  dispatchEvent,\n  forEach,\n  getData,\n  getImageNaturalSizes,\n  getPointer,\n  getTransforms,\n  isFunction,\n  isNumber,\n  removeClass,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nexport default {\n  click(event) {\n    const { target } = event;\n    const { options, imageData } = this;\n    const action = getData(target, DATA_ACTION);\n\n    // Cancel the emulated click when the native click event was triggered.\n    if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n      clearTimeout(this.clickCanvasTimeout);\n    }\n\n    switch (action) {\n      case 'mix':\n        if (this.played) {\n          this.stop();\n        } else if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          } else {\n            this.full();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      case 'hide':\n        this.hide();\n        break;\n\n      case 'view':\n        this.view(getData(target, 'index'));\n        break;\n\n      case 'zoom-in':\n        this.zoom(0.1, true);\n        break;\n\n      case 'zoom-out':\n        this.zoom(-0.1, true);\n        break;\n\n      case 'one-to-one':\n        this.toggle();\n        break;\n\n      case 'reset':\n        this.reset();\n        break;\n\n      case 'prev':\n        this.prev(options.loop);\n        break;\n\n      case 'play':\n        this.play(options.fullscreen);\n        break;\n\n      case 'next':\n        this.next(options.loop);\n        break;\n\n      case 'rotate-left':\n        this.rotate(-90);\n        break;\n\n      case 'rotate-right':\n        this.rotate(90);\n        break;\n\n      case 'flip-horizontal':\n        this.scaleX(-imageData.scaleX || -1);\n        break;\n\n      case 'flip-vertical':\n        this.scaleY(-imageData.scaleY || -1);\n        break;\n\n      default:\n        if (this.played) {\n          this.stop();\n        }\n    }\n  },\n\n  dblclick(event) {\n    event.preventDefault();\n\n    if (this.viewed && event.target === this.image) {\n      // Cancel the emulated double click when the native dblclick event was triggered.\n      if (IS_TOUCH_DEVICE && event.isTrusted) {\n        clearTimeout(this.doubleClickImageTimeout);\n      }\n\n      this.toggle();\n    }\n  },\n\n  load() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = false;\n    }\n\n    const {\n      element,\n      options,\n      image,\n      index,\n      viewerData,\n    } = this;\n\n    removeClass(image, CLASS_INVISIBLE);\n\n    if (options.loading) {\n      removeClass(this.canvas, CLASS_LOADING);\n    }\n\n    image.style.cssText = (\n      'height:0;'\n      + `margin-left:${viewerData.width / 2}px;`\n      + `margin-top:${viewerData.height / 2}px;`\n      + 'max-width:none!important;'\n      + 'position:absolute;'\n      + 'width:0;'\n    );\n\n    this.initImage(() => {\n      toggleClass(image, CLASS_MOVE, options.movable);\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n\n      this.renderImage(() => {\n        this.viewed = true;\n        this.viewing = false;\n\n        if (isFunction(options.viewed)) {\n          addListener(element, EVENT_VIEWED, options.viewed, {\n            once: true,\n          });\n        }\n\n        dispatchEvent(element, EVENT_VIEWED, {\n          originalImage: this.images[index],\n          index,\n          image,\n        }, {\n          cancelable: false,\n        });\n      });\n    });\n  },\n\n  loadImage(event) {\n    const image = event.target;\n    const parent = image.parentNode;\n    const parentWidth = parent.offsetWidth || 30;\n    const parentHeight = parent.offsetHeight || 50;\n    const filled = !!getData(image, 'filled');\n\n    getImageNaturalSizes(image, this.options, (naturalWidth, naturalHeight) => {\n      const aspectRatio = naturalWidth / naturalHeight;\n      let width = parentWidth;\n      let height = parentHeight;\n\n      if (parentHeight * aspectRatio > parentWidth) {\n        if (filled) {\n          width = parentHeight * aspectRatio;\n        } else {\n          height = parentWidth / aspectRatio;\n        }\n      } else if (filled) {\n        height = parentWidth / aspectRatio;\n      } else {\n        width = parentHeight * aspectRatio;\n      }\n\n      setStyle(image, assign({\n        width,\n        height,\n      }, getTransforms({\n        translateX: (parentWidth - width) / 2,\n        translateY: (parentHeight - height) / 2,\n      })));\n    });\n  },\n\n  keydown(event) {\n    const { options } = this;\n\n    if (!this.fulled || !options.keyboard) {\n      return;\n    }\n\n    switch (event.keyCode || event.which || event.charCode) {\n      // Escape\n      case 27:\n        if (this.played) {\n          this.stop();\n        } else if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      // Space\n      case 32:\n        if (this.played) {\n          this.stop();\n        }\n\n        break;\n\n      // ArrowLeft\n      case 37:\n        this.prev(options.loop);\n        break;\n\n      // ArrowUp\n      case 38:\n        // Prevent scroll on Firefox\n        event.preventDefault();\n\n        // Zoom in\n        this.zoom(options.zoomRatio, true);\n        break;\n\n      // ArrowRight\n      case 39:\n        this.next(options.loop);\n        break;\n\n      // ArrowDown\n      case 40:\n        // Prevent scroll on Firefox\n        event.preventDefault();\n\n        // Zoom out\n        this.zoom(-options.zoomRatio, true);\n        break;\n\n      // Ctrl + 0\n      case 48:\n        // Fall through\n\n      // Ctrl + 1\n      // eslint-disable-next-line no-fallthrough\n      case 49:\n        if (event.ctrlKey) {\n          event.preventDefault();\n          this.toggle();\n        }\n\n        break;\n\n      default:\n    }\n  },\n\n  dragstart(event) {\n    if (event.target.tagName.toLowerCase() === 'img') {\n      event.preventDefault();\n    }\n  },\n\n  pointerdown(event) {\n    const { options, pointers } = this;\n    const { buttons, button } = event;\n\n    if (\n      !this.viewed\n      || this.showing\n      || this.viewing\n      || this.hiding\n\n      // Handle mouse event and pointer event and ignore touch event\n      || ((\n        event.type === 'mousedown'\n        || (event.type === 'pointerdown' && event.pointerType === 'mouse')\n      ) && (\n        // No primary button (Usually the left button)\n        (isNumber(buttons) && buttons !== 1)\n        || (isNumber(button) && button !== 0)\n\n        // Open context menu\n        || event.ctrlKey\n      ))\n    ) {\n      return;\n    }\n\n    // Prevent default behaviours as page zooming in touch devices.\n    event.preventDefault();\n\n    if (event.changedTouches) {\n      forEach(event.changedTouches, (touch) => {\n        pointers[touch.identifier] = getPointer(touch);\n      });\n    } else {\n      pointers[event.pointerId || 0] = getPointer(event);\n    }\n\n    let action = options.movable ? ACTION_MOVE : false;\n\n    if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n      action = ACTION_ZOOM;\n    } else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n      action = ACTION_SWITCH;\n    }\n\n    if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n      removeClass(this.image, CLASS_TRANSITION);\n    }\n\n    this.action = action;\n  },\n\n  pointermove(event) {\n    const { pointers, action } = this;\n\n    if (!this.viewed || !action) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (event.changedTouches) {\n      forEach(event.changedTouches, (touch) => {\n        assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n      });\n    } else {\n      assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n    }\n\n    this.change(event);\n  },\n\n  pointerup(event) {\n    const { options, action, pointers } = this;\n    let pointer;\n\n    if (event.changedTouches) {\n      forEach(event.changedTouches, (touch) => {\n        pointer = pointers[touch.identifier];\n        delete pointers[touch.identifier];\n      });\n    } else {\n      pointer = pointers[event.pointerId || 0];\n      delete pointers[event.pointerId || 0];\n    }\n\n    if (!action) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n      addClass(this.image, CLASS_TRANSITION);\n    }\n\n    this.action = false;\n\n    // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n    if (\n      IS_TOUCH_DEVICE\n      && action !== ACTION_ZOOM\n      && pointer\n      && (Date.now() - pointer.timeStamp < 500)\n    ) {\n      clearTimeout(this.clickCanvasTimeout);\n      clearTimeout(this.doubleClickImageTimeout);\n\n      if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n        if (this.imageClicked) {\n          this.imageClicked = false;\n\n          // This timeout will be cleared later when a native dblclick event is triggering\n          this.doubleClickImageTimeout = setTimeout(() => {\n            dispatchEvent(this.image, EVENT_DBLCLICK);\n          }, 50);\n        } else {\n          this.imageClicked = true;\n\n          // The default timing of a double click in Windows is 500 ms\n          this.doubleClickImageTimeout = setTimeout(() => {\n            this.imageClicked = false;\n          }, 500);\n        }\n      } else {\n        this.imageClicked = false;\n\n        if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n          // This timeout will be cleared later when a native click event is triggering\n          this.clickCanvasTimeout = setTimeout(() => {\n            dispatchEvent(this.canvas, EVENT_CLICK);\n          }, 50);\n        }\n      }\n    }\n  },\n\n  resize() {\n    console.log(123,this)\n    if (!this.isShown || this.hiding) {\n      return;\n    }\n\n    if (this.fulled) {\n      this.close();\n      this.initBody();\n      this.open();\n    }\n\n    this.initContainer();\n    this.initViewer();\n    this.renderViewer();\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage();\n      });\n    }\n\n    if (this.played) {\n      if (this.options.fullscreen && this.fulled && !(\n        document.fullscreenElement\n        || document.webkitFullscreenElement\n        || document.mozFullScreenElement\n        || document.msFullscreenElement\n      )) {\n        this.stop();\n        return;\n      }\n\n      forEach(this.player.getElementsByTagName('img'), (image) => {\n        addListener(image, EVENT_LOAD, this.loadImage.bind(this), {\n          once: true,\n        });\n        dispatchEvent(image, EVENT_LOAD);\n      });\n    }\n  },\n\n  wheel(event) {\n    if (!this.viewed) {\n      return;\n    }\n\n    event.preventDefault();\n\n    // Limit wheel speed to prevent zoom too fast\n    if (this.wheeling) {\n      return;\n    }\n\n    this.wheeling = true;\n\n    setTimeout(() => {\n      this.wheeling = false;\n    }, 50);\n\n    const ratio = Number(this.options.zoomRatio) || 0.1;\n    let delta = 1;\n\n    if (event.deltaY) {\n      delta = event.deltaY > 0 ? 1 : -1;\n    } else if (event.wheelDelta) {\n      delta = -event.wheelDelta / 120;\n    } else if (event.detail) {\n      delta = event.detail > 0 ? 1 : -1;\n    }\n\n    this.zoom(-delta * ratio, true, event);\n  },\n};\n","import {\n  CLASS_ACTIVE,\n  CLASS_FADE,\n  CLASS_FIXED,\n  CLASS_FULLSCREEN_EXIT,\n  CLASS_HIDE,\n  CLASS_IN,\n  CLASS_INVISIBLE,\n  CLASS_LOADING,\n  CLASS_SHOW,\n  CLASS_TRANSITION,\n  EVENT_CLICK,\n  EVENT_HIDE,\n  EVENT_LOAD,\n  EVENT_SHOW,\n  EVENT_TRANSITION_END,\n  EVENT_VIEW,\n  EVENT_VIEWED,\n  EVENT_ZOOM,\n  EVENT_ZOOMED,\n  EVENT_PLAY,\n  EVENT_STOP,\n  NAMESPACE,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  dispatchEvent,\n  escapeHTMLEntities,\n  forEach,\n  getData,\n  getOffset,\n  getPointersCenter,\n  hasClass,\n  isFunction,\n  isNumber,\n  isUndefined,\n  removeClass,\n  removeListener,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nexport default {\n  /** Show the viewer (only available in modal mode)\n   * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n   * @returns {Viewer} this\n   */\n  show(immediate = false) {\n    const { element, options } = this;\n\n    if (options.inline || this.showing || this.isShown || this.showing) {\n      return this;\n    }\n\n    if (!this.ready) {\n      this.build();\n\n      if (this.ready) {\n        this.show(immediate);\n      }\n\n      return this;\n    }\n\n    if (isFunction(options.show)) {\n      addListener(element, EVENT_SHOW, options.show, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n      return this;\n    }\n\n    if (this.hiding) {\n      this.transitioning.abort();\n    }\n\n    this.showing = true;\n    this.open();\n\n    const { viewer } = this;\n\n    removeClass(viewer, CLASS_HIDE);\n\n    if (options.transition && !immediate) {\n      const shown = this.shown.bind(this);\n\n      this.transitioning = {\n        abort: () => {\n          removeListener(viewer, EVENT_TRANSITION_END, shown);\n          removeClass(viewer, CLASS_IN);\n        },\n      };\n\n      addClass(viewer, CLASS_TRANSITION);\n\n      // Force reflow to enable CSS3 transition\n      viewer.initialOffsetWidth = viewer.offsetWidth;\n      addListener(viewer, EVENT_TRANSITION_END, shown, {\n        once: true,\n      });\n      addClass(viewer, CLASS_IN);\n    } else {\n      addClass(viewer, CLASS_IN);\n      this.shown();\n    }\n\n    return this;\n  },\n\n  /**\n   * Hide the viewer (only available in modal mode)\n   * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n   * @returns {Viewer} this\n   */\n  hide(immediate = false) {\n    const { element, options } = this;\n\n    if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n      return this;\n    }\n\n    if (isFunction(options.hide)) {\n      addListener(element, EVENT_HIDE, options.hide, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_HIDE) === false) {\n      return this;\n    }\n\n    if (this.showing) {\n      this.transitioning.abort();\n    }\n\n    this.hiding = true;\n\n    if (this.played) {\n      this.stop();\n    } else if (this.viewing) {\n      this.viewing.abort();\n    }\n\n    const { viewer, image } = this;\n    const hideImmediately = () => {\n      removeClass(viewer, CLASS_IN);\n      this.hidden();\n    };\n\n    if (options.transition && !immediate) {\n      const onViewerTransitionEnd = (event) => {\n        // Ignore all propagating `transitionend` events (#275).\n        if (event && event.target === viewer) {\n          removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n          this.hidden();\n        }\n      };\n      const onImageTransitionEnd = () => {\n        // In case of show the viewer by `viewer.show(true)` previously (#407).\n        if (hasClass(viewer, CLASS_TRANSITION)) {\n          addListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n          removeClass(viewer, CLASS_IN);\n        } else {\n          hideImmediately();\n        }\n      };\n\n      this.transitioning = {\n        abort: () => {\n          if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n            removeListener(image, EVENT_TRANSITION_END, onImageTransitionEnd);\n          } else if (hasClass(viewer, CLASS_TRANSITION)) {\n            removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n          }\n        },\n      };\n\n      // In case of hiding the viewer when holding on the image (#255),\n      // note that the `CLASS_TRANSITION` class will be removed on pointer down.\n      if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n        addListener(image, EVENT_TRANSITION_END, onImageTransitionEnd, {\n          once: true,\n        });\n        this.zoomTo(0, false, false, true);\n      } else {\n        onImageTransitionEnd();\n      }\n    } else {\n      hideImmediately();\n    }\n\n    return this;\n  },\n\n  /**\n   * View one of the images with image's index\n   * @param {number} index - The index of the image to view.\n   * @returns {Viewer} this\n   */\n  view(index = this.options.initialViewIndex) {\n    index = Number(index) || 0;\n\n    if (this.hiding || this.played || index < 0 || index >= this.length\n      || (this.viewed && index === this.index)) {\n      return this;\n    }\n\n    if (!this.isShown) {\n      this.index = index;\n      return this.show();\n    }\n\n    if (this.viewing) {\n      this.viewing.abort();\n    }\n\n    const {\n      element,\n      options,\n      title,\n      canvas,\n    } = this;\n    const item = this.items[index];\n    const img = item.querySelector('img');\n    const url = getData(img, 'originalUrl');\n    const alt = img.getAttribute('alt');\n    const image = document.createElement('img');\n\n    forEach(options.inheritedAttributes, (name) => {\n      const value = img.getAttribute(name);\n\n      if (value !== null) {\n        image.setAttribute(name, value);\n      }\n    });\n\n    image.src = url;\n    image.alt = alt;\n\n    if (isFunction(options.view)) {\n      addListener(element, EVENT_VIEW, options.view, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_VIEW, {\n      originalImage: this.images[index],\n      index,\n      image,\n    }) === false || !this.isShown || this.hiding || this.played) {\n      return this;\n    }\n\n    this.image = image;\n    removeClass(this.items[this.index], CLASS_ACTIVE);\n    addClass(item, CLASS_ACTIVE);\n    this.viewed = false;\n    this.index = index;\n    this.imageData = {};\n    addClass(image, CLASS_INVISIBLE);\n\n    if (options.loading) {\n      addClass(canvas, CLASS_LOADING);\n    }\n\n    canvas.innerHTML = '';\n    canvas.appendChild(image);\n\n    // Center current item\n    this.renderList();\n\n    // Clear title\n    title.innerHTML = '';\n\n    // Generate title after viewed\n    const onViewed = () => {\n      const { imageData } = this;\n      const render = Array.isArray(options.title) ? options.title[1] : options.title;\n\n      title.innerHTML = escapeHTMLEntities(isFunction(render)\n        ? render.call(this, image, imageData)\n        : `${alt} (${imageData.naturalWidth} × ${imageData.naturalHeight})`);\n    };\n    let onLoad;\n\n    addListener(element, EVENT_VIEWED, onViewed, {\n      once: true,\n    });\n\n    this.viewing = {\n      abort: () => {\n        removeListener(element, EVENT_VIEWED, onViewed);\n\n        if (image.complete) {\n          if (this.imageRendering) {\n            this.imageRendering.abort();\n          } else if (this.imageInitializing) {\n            this.imageInitializing.abort();\n          }\n        } else {\n          // Cancel download to save bandwidth.\n          image.src = '';\n          removeListener(image, EVENT_LOAD, onLoad);\n\n          if (this.timeout) {\n            clearTimeout(this.timeout);\n          }\n        }\n      },\n    };\n\n    if (image.complete) {\n      this.load();\n    } else {\n      addListener(image, EVENT_LOAD, onLoad = this.load.bind(this), {\n        once: true,\n      });\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n\n      // Make the image visible if it fails to load within 1s\n      this.timeout = setTimeout(() => {\n        removeClass(image, CLASS_INVISIBLE);\n        this.timeout = false;\n      }, 1000);\n    }\n\n    return this;\n  },\n\n  /**\n   * View the previous image\n   * @param {boolean} [loop=false] - Indicate if view the last one\n   * when it is the first one at present.\n   * @returns {Viewer} this\n   */\n  prev(loop = false) {\n    let index = this.index - 1;\n\n    if (index < 0) {\n      index = loop ? this.length - 1 : 0;\n    }\n\n    this.view(index);\n    return this;\n  },\n\n  /**\n   * View the next image\n   * @param {boolean} [loop=false] - Indicate if view the first one\n   * when it is the last one at present.\n   * @returns {Viewer} this\n   */\n  next(loop = false) {\n    const maxIndex = this.length - 1;\n    let index = this.index + 1;\n\n    if (index > maxIndex) {\n      index = loop ? 0 : maxIndex;\n    }\n\n    this.view(index);\n    return this;\n  },\n\n  /**\n   * Move the image with relative offsets.\n   * @param {number} offsetX - The relative offset distance on the x-axis.\n   * @param {number} offsetY - The relative offset distance on the y-axis.\n   * @returns {Viewer} this\n   */\n  move(offsetX, offsetY) {\n    const { imageData } = this;\n\n    this.moveTo(\n      isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX),\n      isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY),\n    );\n\n    return this;\n  },\n\n  /**\n   * Move the image to an absolute point.\n   * @param {number} x - The x-axis coordinate.\n   * @param {number} [y=x] - The y-axis coordinate.\n   * @returns {Viewer} this\n   */\n  moveTo(x, y = x) {\n    const { imageData } = this;\n\n    x = Number(x);\n    y = Number(y);\n\n    if (this.viewed && !this.played && this.options.movable) {\n      let changed = false;\n\n      if (isNumber(x)) {\n        imageData.left = x;\n        changed = true;\n      }\n\n      if (isNumber(y)) {\n        imageData.top = y;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Zoom the image with a relative ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @returns {Viewer} this\n   */\n  zoom(ratio, hasTooltip = false, _originalEvent = null) {\n    const { imageData } = this;\n\n    ratio = Number(ratio);\n\n    if (ratio < 0) {\n      ratio = 1 / (1 - ratio);\n    } else {\n      ratio = 1 + ratio;\n    }\n\n    this.zoomTo((imageData.width * ratio) / imageData.naturalWidth, hasTooltip, _originalEvent);\n\n    return this;\n  },\n\n  /**\n   * Zoom the image to an absolute ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n   * @returns {Viewer} this\n   */\n  zoomTo(ratio, hasTooltip = false, _originalEvent = null, _zoomable = false) {\n    const {\n      element,\n      options,\n      pointers,\n      imageData,\n    } = this;\n    const {\n      width,\n      height,\n      left,\n      top,\n      naturalWidth,\n      naturalHeight,\n    } = imageData;\n\n    ratio = Math.max(0, ratio);\n\n    if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n      if (!_zoomable) {\n        const minZoomRatio = Math.max(0.01, options.minZoomRatio);\n        const maxZoomRatio = Math.min(100, options.maxZoomRatio);\n\n        ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n      }\n\n      if (_originalEvent && options.zoomRatio >= 0.055 && ratio > 0.95 && ratio < 1.05) {\n        ratio = 1;\n      }\n\n      const newWidth = naturalWidth * ratio;\n      const newHeight = naturalHeight * ratio;\n      const offsetWidth = newWidth - width;\n      const offsetHeight = newHeight - height;\n      const oldRatio = width / naturalWidth;\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom, {\n          once: true,\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_ZOOM, {\n        ratio,\n        oldRatio,\n        originalEvent: _originalEvent,\n      }) === false) {\n        return this;\n      }\n\n      this.zooming = true;\n\n      if (_originalEvent) {\n        const offset = getOffset(this.viewer);\n        const center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n          pageX: _originalEvent.pageX,\n          pageY: _originalEvent.pageY,\n        };\n\n        // Zoom from the triggering point of the event\n        imageData.left -= offsetWidth * (((center.pageX - offset.left) - left) / width);\n        imageData.top -= offsetHeight * (((center.pageY - offset.top) - top) / height);\n      } else {\n        // Zoom from the center of the image\n        imageData.left -= offsetWidth / 2;\n        imageData.top -= offsetHeight / 2;\n      }\n\n      imageData.width = newWidth;\n      imageData.height = newHeight;\n      imageData.ratio = ratio;\n      this.renderImage(() => {\n        this.zooming = false;\n\n        if (isFunction(options.zoomed)) {\n          addListener(element, EVENT_ZOOMED, options.zoomed, {\n            once: true,\n          });\n        }\n\n        dispatchEvent(element, EVENT_ZOOMED, {\n          ratio,\n          oldRatio,\n          originalEvent: _originalEvent,\n        }, {\n          cancelable: false,\n        });\n      });\n\n      if (hasTooltip) {\n        this.tooltip();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Rotate the image with a relative degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Viewer} this\n   */\n  rotate(degree) {\n    this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n\n    return this;\n  },\n\n  /**\n   * Rotate the image to an absolute degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Viewer} this\n   */\n  rotateTo(degree) {\n    const { imageData } = this;\n\n    degree = Number(degree);\n\n    if (isNumber(degree) && this.viewed && !this.played && this.options.rotatable) {\n      imageData.rotate = degree;\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the x-axis.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @returns {Viewer} this\n   */\n  scaleX(scaleX) {\n    this.scale(scaleX, this.imageData.scaleY);\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the y-axis.\n   * @param {number} scaleY - The scale ratio on the y-axis.\n   * @returns {Viewer} this\n   */\n  scaleY(scaleY) {\n    this.scale(this.imageData.scaleX, scaleY);\n\n    return this;\n  },\n\n  /**\n   * Scale the image.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n   * @returns {Viewer} this\n   */\n  scale(scaleX, scaleY = scaleX) {\n    const { imageData } = this;\n\n    scaleX = Number(scaleX);\n    scaleY = Number(scaleY);\n\n    if (this.viewed && !this.played && this.options.scalable) {\n      let changed = false;\n\n      if (isNumber(scaleX)) {\n        imageData.scaleX = scaleX;\n        changed = true;\n      }\n\n      if (isNumber(scaleY)) {\n        imageData.scaleY = scaleY;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Play the images\n   * @param {boolean} [fullscreen=false] - Indicate if request fullscreen or not.\n   * @returns {Viewer} this\n   */\n  play(fullscreen = false) {\n    if (!this.isShown || this.played) {\n      return this;\n    }\n\n    const { element, options } = this;\n\n    if (isFunction(options.play)) {\n      addListener(element, EVENT_PLAY, options.play, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_PLAY) === false) {\n      return this;\n    }\n\n    const { player } = this;\n    const onLoad = this.loadImage.bind(this);\n    const list = [];\n    let total = 0;\n    let index = 0;\n\n    this.played = true;\n    this.onLoadWhenPlay = onLoad;\n\n    if (fullscreen) {\n      this.requestFullscreen();\n    }\n\n    addClass(player, CLASS_SHOW);\n    forEach(this.items, (item, i) => {\n      const img = item.querySelector('img');\n      const image = document.createElement('img');\n\n      image.src = getData(img, 'originalUrl');\n      image.alt = img.getAttribute('alt');\n      image.referrerPolicy = img.referrerPolicy;\n      total += 1;\n      addClass(image, CLASS_FADE);\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n\n      if (hasClass(item, CLASS_ACTIVE)) {\n        addClass(image, CLASS_IN);\n        index = i;\n      }\n\n      list.push(image);\n      addListener(image, EVENT_LOAD, onLoad, {\n        once: true,\n      });\n      player.appendChild(image);\n    });\n\n    if (isNumber(options.interval) && options.interval > 0) {\n      const play = () => {\n        this.playing = setTimeout(() => {\n          removeClass(list[index], CLASS_IN);\n          index += 1;\n          index = index < total ? index : 0;\n          addClass(list[index], CLASS_IN);\n          play();\n        }, options.interval);\n      };\n\n      if (total > 1) {\n        play();\n      }\n    }\n\n    return this;\n  },\n\n  // Stop play\n  stop() {\n    if (!this.played) {\n      return this;\n    }\n\n    const { element, options } = this;\n\n    if (isFunction(options.stop)) {\n      addListener(element, EVENT_STOP, options.stop, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_STOP) === false) {\n      return this;\n    }\n\n    const { player } = this;\n\n    this.played = false;\n    clearTimeout(this.playing);\n    forEach(player.getElementsByTagName('img'), (image) => {\n      removeListener(image, EVENT_LOAD, this.onLoadWhenPlay);\n    });\n    removeClass(player, CLASS_SHOW);\n    player.innerHTML = '';\n    this.exitFullscreen();\n\n    return this;\n  },\n\n  // Enter modal mode (only available in inline mode)\n  full() {\n    const {\n      options,\n      viewer,\n      image,\n      list,\n    } = this;\n\n    if (!this.isShown || this.played || this.fulled || !options.inline) {\n      return this;\n    }\n\n    this.fulled = true;\n    this.open();\n    addClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(list, CLASS_TRANSITION);\n\n      if (this.viewed) {\n        removeClass(image, CLASS_TRANSITION);\n      }\n    }\n\n    addClass(viewer, CLASS_FIXED);\n    viewer.setAttribute('style', '');\n    setStyle(viewer, {\n      zIndex: options.zIndex,\n    });\n\n    this.initContainer();\n    this.viewerData = assign({}, this.containerData);\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage(() => {\n          if (options.transition) {\n            setTimeout(() => {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n    }\n\n    return this;\n  },\n\n  // Exit modal mode (only available in inline mode)\n  exit() {\n    const {\n      options,\n      viewer,\n      image,\n      list,\n    } = this;\n\n    if (!this.isShown || this.played || !this.fulled || !options.inline) {\n      return this;\n    }\n\n    this.fulled = false;\n    this.close();\n    removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(list, CLASS_TRANSITION);\n\n      if (this.viewed) {\n        removeClass(image, CLASS_TRANSITION);\n      }\n    }\n\n    removeClass(viewer, CLASS_FIXED);\n    setStyle(viewer, {\n      zIndex: options.zIndexInline,\n    });\n\n    this.viewerData = assign({}, this.parentData);\n    this.renderViewer();\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage(() => {\n          if (options.transition) {\n            setTimeout(() => {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n    }\n\n    return this;\n  },\n\n  // Show the current ratio of the image with percentage\n  tooltip() {\n    const { options, tooltipBox, imageData } = this;\n\n    if (!this.viewed || this.played || !options.tooltip) {\n      return this;\n    }\n\n    tooltipBox.textContent = `${Math.round(imageData.ratio * 100)}%`;\n\n    if (!this.tooltipping) {\n      if (options.transition) {\n        if (this.fading) {\n          dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n        }\n\n        addClass(tooltipBox, CLASS_SHOW);\n        addClass(tooltipBox, CLASS_FADE);\n        addClass(tooltipBox, CLASS_TRANSITION);\n\n        // Force reflow to enable CSS3 transition\n        tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n        addClass(tooltipBox, CLASS_IN);\n      } else {\n        addClass(tooltipBox, CLASS_SHOW);\n      }\n    } else {\n      clearTimeout(this.tooltipping);\n    }\n\n    this.tooltipping = setTimeout(() => {\n      if (options.transition) {\n        addListener(tooltipBox, EVENT_TRANSITION_END, () => {\n          removeClass(tooltipBox, CLASS_SHOW);\n          removeClass(tooltipBox, CLASS_FADE);\n          removeClass(tooltipBox, CLASS_TRANSITION);\n          this.fading = false;\n        }, {\n          once: true,\n        });\n\n        removeClass(tooltipBox, CLASS_IN);\n        this.fading = true;\n      } else {\n        removeClass(tooltipBox, CLASS_SHOW);\n      }\n\n      this.tooltipping = false;\n    }, 1000);\n\n    return this;\n  },\n\n  // Toggle the image size between its natural size and initial size\n  toggle() {\n    if (this.imageData.ratio === 1) {\n      this.zoomTo(this.initialImageData.ratio, true);\n    } else {\n      this.zoomTo(1, true);\n    }\n\n    return this;\n  },\n\n  // Reset the image to its initial state\n  reset() {\n    if (this.viewed && !this.played) {\n      this.imageData = assign({}, this.initialImageData);\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n  // Update viewer when images changed\n  update() {\n    const { element, options, isImg } = this;\n\n    // Destroy viewer if the target image was deleted\n    if (isImg && !element.parentNode) {\n      return this.destroy();\n    }\n\n    const images = [];\n\n    forEach(isImg ? [element] : element.querySelectorAll('img'), (image) => {\n      if (isFunction(options.filter)) {\n        if (options.filter.call(this, image)) {\n          images.push(image);\n        }\n      } else if (this.getImageURL(image)) {\n        images.push(image);\n      }\n    });\n\n    if (!images.length) {\n      return this;\n    }\n\n    this.images = images;\n    this.length = images.length;\n\n    if (this.ready) {\n      const changedIndexes = [];\n\n      forEach(this.items, (item, i) => {\n        const img = item.querySelector('img');\n        const image = images[i];\n\n        if (image && img) {\n          if (\n            image.src !== img.src\n\n            // Title changed (#408)\n            || image.alt !== img.alt\n          ) {\n            changedIndexes.push(i);\n          }\n        } else {\n          changedIndexes.push(i);\n        }\n      });\n\n      setStyle(this.list, {\n        width: 'auto',\n      });\n\n      this.initList();\n\n      if (this.isShown) {\n        if (this.length) {\n          if (this.viewed) {\n            const changedIndex = changedIndexes.indexOf(this.index);\n\n            if (changedIndex >= 0) {\n              this.viewed = false;\n              this.view(Math.max(Math.min(this.index - changedIndex, this.length - 1), 0));\n            } else {\n              // Reactivate the current viewing item after reset the list.\n              addClass(this.items[this.index], CLASS_ACTIVE);\n            }\n          }\n        } else {\n          this.image = null;\n          this.viewed = false;\n          this.index = 0;\n          this.imageData = {};\n          this.canvas.innerHTML = '';\n          this.title.innerHTML = '';\n        }\n      }\n    } else {\n      this.build();\n    }\n\n    return this;\n  },\n\n  // Destroy the viewer\n  destroy() {\n    const { element, options } = this;\n\n    if (!element[NAMESPACE]) {\n      return this;\n    }\n\n    this.destroyed = true;\n\n    if (this.ready) {\n      if (this.played) {\n        this.stop();\n      }\n\n      if (options.inline) {\n        if (this.fulled) {\n          this.exit();\n        }\n\n        this.unbind();\n      } else if (this.isShown) {\n        if (this.viewing) {\n          if (this.imageRendering) {\n            this.imageRendering.abort();\n          } else if (this.imageInitializing) {\n            this.imageInitializing.abort();\n          }\n        }\n\n        if (this.hiding) {\n          this.transitioning.abort();\n        }\n\n        this.hidden();\n      } else if (this.showing) {\n        this.transitioning.abort();\n        this.hidden();\n      }\n\n      this.ready = false;\n      this.viewer.parentNode.removeChild(this.viewer);\n    } else if (options.inline) {\n      if (this.delaying) {\n        this.delaying.abort();\n      } else if (this.initializing) {\n        this.initializing.abort();\n      }\n    }\n\n    if (!options.inline) {\n      removeListener(element, EVENT_CLICK, this.onStart);\n    }\n\n    element[NAMESPACE] = undefined;\n    return this;\n  },\n};\n","import {\n  ACTION_MOVE,\n  ACTION_SWITCH,\n  ACTION_ZOOM,\n  CLASS_HIDE,\n  CLASS_OPEN,\n  EVENT_HIDDEN,\n  EVENT_SHOWN,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  dispatchEvent,\n  forEach,\n  getMaxZoomRatio,\n  isFunction,\n  isString,\n  removeClass,\n} from './utilities';\n\nexport default {\n  getImageURL(image) {\n    let { url } = this.options;\n\n    if (isString(url)) {\n      url = image.getAttribute(url);\n    } else if (isFunction(url)) {\n      url = url.call(this, image);\n    } else {\n      url = '';\n    }\n\n    return url;\n  },\n\n  open() {\n    const { body } = this;\n\n    addClass(body, CLASS_OPEN);\n\n    body.style.paddingRight = `${this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0)}px`;\n  },\n\n  close() {\n    const { body } = this;\n\n    removeClass(body, CLASS_OPEN);\n    body.style.paddingRight = this.initialBodyPaddingRight;\n  },\n\n  shown() {\n    const { element, options } = this;\n\n    this.fulled = true;\n    this.isShown = true;\n    this.render();\n    this.bind();\n    this.showing = false;\n\n    if (isFunction(options.shown)) {\n      addListener(element, EVENT_SHOWN, options.shown, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_SHOWN) === false) {\n      return;\n    }\n\n    if (this.ready && this.isShown && !this.hiding) {\n      this.view(this.index);\n    }\n  },\n\n  hidden() {\n    const { element, options } = this;\n\n    this.fulled = false;\n    this.viewed = false;\n    this.isShown = false;\n    this.close();\n    this.unbind();\n    addClass(this.viewer, CLASS_HIDE);\n    this.resetList();\n    this.resetImage();\n    this.hiding = false;\n\n    if (!this.destroyed) {\n      if (isFunction(options.hidden)) {\n        addListener(element, EVENT_HIDDEN, options.hidden, {\n          once: true,\n        });\n      }\n\n      dispatchEvent(element, EVENT_HIDDEN, null, {\n        cancelable: false,\n      });\n    }\n  },\n\n  requestFullscreen() {\n    const document = this.element.ownerDocument;\n\n    if (this.fulled && !(\n      document.fullscreenElement\n      || document.webkitFullscreenElement\n      || document.mozFullScreenElement\n      || document.msFullscreenElement\n    )) {\n      const { documentElement } = document;\n\n      // Element.requestFullscreen()\n      if (documentElement.requestFullscreen) {\n        documentElement.requestFullscreen();\n      } else if (documentElement.webkitRequestFullscreen) {\n        documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      } else if (documentElement.mozRequestFullScreen) {\n        documentElement.mozRequestFullScreen();\n      } else if (documentElement.msRequestFullscreen) {\n        documentElement.msRequestFullscreen();\n      }\n    }\n  },\n\n  exitFullscreen() {\n    const document = this.element.ownerDocument;\n\n    if (this.fulled && (\n      document.fullscreenElement\n      || document.webkitFullscreenElement\n      || document.mozFullScreenElement\n      || document.msFullscreenElement\n    )) {\n      // Document.exitFullscreen()\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen();\n      }\n    }\n  },\n\n  change(event) {\n    const { options, pointers } = this;\n    const pointer = pointers[Object.keys(pointers)[0]];\n    const offsetX = pointer.endX - pointer.startX;\n    const offsetY = pointer.endY - pointer.startY;\n\n    switch (this.action) {\n      // Move the current image\n      case ACTION_MOVE:\n        this.move(offsetX, offsetY);\n        break;\n\n      // Zoom the current image\n      case ACTION_ZOOM:\n        this.zoom(getMaxZoomRatio(pointers), false, event);\n        break;\n\n      case ACTION_SWITCH: {\n        this.action = 'switched';\n\n        const absoluteOffsetX = Math.abs(offsetX);\n\n        if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n          // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n          this.pointers = {};\n\n          if (offsetX > 1) {\n            this.prev(options.loop);\n          } else if (offsetX < -1) {\n            this.next(options.loop);\n          }\n        }\n\n        break;\n      }\n\n      default:\n    }\n\n    // Override\n    forEach(pointers, (p) => {\n      p.startX = p.endX;\n      p.startY = p.endY;\n    });\n  },\n\n  isSwitchable() {\n    const { imageData, viewerData } = this;\n\n    return this.length > 1 && imageData.left >= 0 && imageData.top >= 0\n      && imageData.width <= viewerData.width\n      && imageData.height <= viewerData.height;\n  },\n};\n","import DEFAULTS from './defaults';\nimport TEMPLATE from './template';\nimport render from './render';\nimport events from './events';\nimport handlers from './handlers';\nimport methods from './methods';\nimport others from './others';\nimport {\n  BUTTONS,\n  CLASS_CLOSE,\n  CLASS_FADE,\n  CLASS_FIXED,\n  CLASS_FULLSCREEN,\n  CLASS_HIDE,\n  CLASS_INVISIBLE,\n  DATA_ACTION,\n  EVENT_CLICK,\n  EVENT_LOAD,\n  EVENT_READY,\n  NAMESPACE,\n  REGEXP_SPACES,\n  WINDOW,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  dispatchEvent,\n  forEach,\n  getResponsiveClass,\n  hyphenate,\n  isFunction,\n  isNumber,\n  isPlainObject,\n  isString,\n  isUndefined,\n  removeListener,\n  setData,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nconst AnotherViewer = WINDOW.Viewer;\n\nclass Viewer {\n  /**\n   * Create a new Viewer.\n   * @param {Element} element - The target element for viewing.\n   * @param {Object} [options={}] - The configuration options.\n   */\n  constructor(element, options = {}) {\n    if (!element || element.nodeType !== 1) {\n      throw new Error('The first argument is required and must be an element.');\n    }\n\n    this.element = element;\n    this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n    this.action = false;\n    this.fading = false;\n    this.fulled = false;\n    this.hiding = false;\n    this.imageClicked = false;\n    this.imageData = {};\n    this.index = this.options.initialViewIndex;\n    this.isImg = false;\n    this.isShown = false;\n    this.length = 0;\n    this.played = false;\n    this.playing = false;\n    this.pointers = {};\n    this.ready = false;\n    this.showing = false;\n    this.timeout = false;\n    this.tooltipping = false;\n    this.viewed = false;\n    this.viewing = false;\n    this.wheeling = false;\n    this.zooming = false;\n    this.init();\n  }\n\n  init() {\n    const { element, options } = this;\n\n    if (element[NAMESPACE]) {\n      return;\n    }\n\n    element[NAMESPACE] = this;\n\n    const isImg = element.tagName.toLowerCase() === 'img';\n    const images = [];\n\n    forEach(isImg ? [element] : element.querySelectorAll('img'), (image) => {\n      if (isFunction(options.filter)) {\n        if (options.filter.call(this, image)) {\n          images.push(image);\n        }\n      } else if (this.getImageURL(image)) {\n        images.push(image);\n      }\n    });\n\n    this.isImg = isImg;\n    this.length = images.length;\n    this.images = images;\n    this.initBody();\n\n    // Override `transition` option if it is not supported\n    if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n      options.transition = false;\n    }\n\n    if (options.inline) {\n      let count = 0;\n      const progress = () => {\n        count += 1;\n\n        if (count === this.length) {\n          let timeout;\n\n          this.initializing = false;\n          this.delaying = {\n            abort: () => {\n              clearTimeout(timeout);\n            },\n          };\n\n          // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n          timeout = setTimeout(() => {\n            this.delaying = false;\n            this.build();\n          }, 0);\n        }\n      };\n\n      this.initializing = {\n        abort: () => {\n          forEach(images, (image) => {\n            if (!image.complete) {\n              removeListener(image, EVENT_LOAD, progress);\n            }\n          });\n        },\n      };\n\n      forEach(images, (image) => {\n        if (image.complete) {\n          progress();\n        } else {\n          addListener(image, EVENT_LOAD, progress, {\n            once: true,\n          });\n        }\n      });\n    } else {\n      addListener(element, EVENT_CLICK, (this.onStart = ({ target }) => {\n        if (target.tagName.toLowerCase() === 'img'\n          && (!isFunction(options.filter) || options.filter.call(this, target))) {\n          this.view(this.images.indexOf(target));\n        }\n      }));\n    }\n  }\n\n  build() {\n    if (this.ready) {\n      return;\n    }\n\n    const { element, options } = this;\n    const parent = element.parentNode;\n    const template = document.createElement('div');\n\n    template.innerHTML = TEMPLATE;\n\n    const viewer = template.querySelector(`.${NAMESPACE}-container`);\n    const title = viewer.querySelector(`.${NAMESPACE}-title`);\n    const toolbar = viewer.querySelector(`.${NAMESPACE}-toolbar`);\n    const navbar = viewer.querySelector(`.${NAMESPACE}-navbar`);\n    const button = viewer.querySelector(`.${NAMESPACE}-button`);\n    const canvas = viewer.querySelector(`.${NAMESPACE}-canvas`);\n\n    this.parent = parent;\n    this.viewer = viewer;\n    this.title = title;\n    this.toolbar = toolbar;\n    this.navbar = navbar;\n    this.button = button;\n    this.canvas = canvas;\n    this.footer = viewer.querySelector(`.${NAMESPACE}-footer`);\n    this.tooltipBox = viewer.querySelector(`.${NAMESPACE}-tooltip`);\n    this.player = viewer.querySelector(`.${NAMESPACE}-player`);\n    this.list = viewer.querySelector(`.${NAMESPACE}-list`);\n\n    addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title)\n      ? options.title[0]\n      : options.title));\n    addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n    toggleClass(button, CLASS_HIDE, !options.button);\n\n    if (options.backdrop) {\n      addClass(viewer, `${NAMESPACE}-backdrop`);\n\n      if (!options.inline && options.backdrop !== 'static') {\n        setData(canvas, DATA_ACTION, 'hide');\n      }\n    }\n\n    if (isString(options.className) && options.className) {\n      // In case there are multiple class names\n      options.className.split(REGEXP_SPACES).forEach((className) => {\n        addClass(viewer, className);\n      });\n    }\n\n    if (options.toolbar) {\n      const list = document.createElement('ul');\n      const custom = isPlainObject(options.toolbar);\n      const zoomButtons = BUTTONS.slice(0, 3);\n      const rotateButtons = BUTTONS.slice(7, 9);\n      const scaleButtons = BUTTONS.slice(9);\n\n      if (!custom) {\n        addClass(toolbar, getResponsiveClass(options.toolbar));\n      }\n\n      forEach(custom ? options.toolbar : BUTTONS, (value, index) => {\n        const deep = custom && isPlainObject(value);\n        const name = custom ? hyphenate(index) : value;\n        const show = deep && !isUndefined(value.show) ? value.show : value;\n\n        if (\n          !show\n          || (!options.zoomable && zoomButtons.indexOf(name) !== -1)\n          || (!options.rotatable && rotateButtons.indexOf(name) !== -1)\n          || (!options.scalable && scaleButtons.indexOf(name) !== -1)\n        ) {\n          return;\n        }\n\n        const size = deep && !isUndefined(value.size) ? value.size : value;\n        const click = deep && !isUndefined(value.click) ? value.click : value;\n        const item = document.createElement('li');\n\n        item.setAttribute('role', 'button');\n        addClass(item, `${NAMESPACE}-${name}`);\n\n        if (!isFunction(click)) {\n          setData(item, DATA_ACTION, name);\n        }\n\n        if (isNumber(show)) {\n          addClass(item, getResponsiveClass(show));\n        }\n\n        if (['small', 'large'].indexOf(size) !== -1) {\n          addClass(item, `${NAMESPACE}-${size}`);\n        } else if (name === 'play') {\n          addClass(item, `${NAMESPACE}-large`);\n        }\n\n        if (isFunction(click)) {\n          addListener(item, EVENT_CLICK, click);\n        }\n\n        list.appendChild(item);\n      });\n\n      toolbar.appendChild(list);\n    } else {\n      addClass(toolbar, CLASS_HIDE);\n    }\n\n    if (!options.rotatable) {\n      const rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n\n      addClass(rotates, CLASS_INVISIBLE);\n      forEach(rotates, (rotate) => {\n        toolbar.appendChild(rotate);\n      });\n    }\n\n    if (options.inline) {\n      addClass(button, CLASS_FULLSCREEN);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline,\n      });\n\n      if (window.getComputedStyle(parent).position === 'static') {\n        setStyle(parent, {\n          position: 'relative',\n        });\n      }\n\n      parent.insertBefore(viewer, element.nextSibling);\n    } else {\n      addClass(button, CLASS_CLOSE);\n      addClass(viewer, CLASS_FIXED);\n      addClass(viewer, CLASS_FADE);\n      addClass(viewer, CLASS_HIDE);\n\n      setStyle(viewer, {\n        zIndex: options.zIndex,\n      });\n\n      let { container } = options;\n\n      if (isString(container)) {\n        container = element.ownerDocument.querySelector(container);\n      }\n\n      if (!container) {\n        container = this.body;\n      }\n\n      container.appendChild(viewer);\n    }\n\n    if (options.inline) {\n      this.render();\n      this.bind();\n      this.isShown = true;\n    }\n\n    this.ready = true;\n\n    if (isFunction(options.ready)) {\n      addListener(element, EVENT_READY, options.ready, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_READY) === false) {\n      this.ready = false;\n      return;\n    }\n\n    if (this.ready && options.inline) {\n      this.view(this.index);\n    }\n  }\n\n  /**\n   * Get the no conflict viewer class.\n   * @returns {Viewer} The viewer class.\n   */\n  static noConflict() {\n    window.Viewer = AnotherViewer;\n    return Viewer;\n  }\n\n  /**\n   * Change the default options.\n   * @param {Object} options - The new default options.\n   */\n  static setDefaults(options) {\n    assign(DEFAULTS, isPlainObject(options) && options);\n  }\n}\n\nassign(Viewer.prototype, render, events, handlers, methods, others);\n\nexport default Viewer;\n"],"names":["backdrop","button","navbar","title","toolbar","className","container","filter","fullscreen","inheritedAttributes","initialViewIndex","inline","interval","keyboard","loading","loop","minWidth","minHeight","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","slideOnTouch","toggleOnDblclick","tooltip","transition","zIndex","zIndexInline","zoomRatio","minZoomRatio","maxZoomRatio","url","ready","show","shown","hide","hidden","view","viewed","zoom","zoomed","play","stop","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_CLICK","EVENT_DBLCLICK","EVENT_DRAG_START","EVENT_HIDDEN","EVENT_HIDE","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_SHOW","EVENT_SHOWN","EVENT_TRANSITION_END","EVENT_VIEW","EVENT_VIEWED","EVENT_WHEEL","EVENT_ZOOM","EVENT_ZOOMED","EVENT_PLAY","EVENT_STOP","DATA_ACTION","REGEXP_SPACES","BUTTONS","isString","value","isNaN","Number","isNumber","isUndefined","isObject","hasOwnProperty","Object","prototype","isPlainObject","constructor","call","error","isFunction","forEach","data","callback","Array","isArray","length","i","keys","key","assign","obj","args","arg","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","escapeHTMLEntities","replace","hasClass","classList","contains","indexOf","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","onceSupported","supported","once","listener","options","defineProperty","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","apply","dispatchEvent","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","getTransforms","rotate","scaleX","scaleY","translateX","translateY","values","push","transform","join","WebkitTransform","msTransform","getImageNameFromURL","decodeURIComponent","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","appendChild","getResponsiveClass","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","Math","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","pageX","pageY","endOnly","end","timeStamp","Date","now","getPointersCenter","count","render","initContainer","initViewer","initList","renderViewer","initBody","ownerDocument","scrollbarWidth","innerWidth","clientWidth","initialBodyPaddingRight","paddingRight","initialBodyComputedPaddingRight","getComputedStyle","containerData","innerHeight","parent","viewerData","max","offsetWidth","offsetHeight","parentData","fulled","viewer","list","items","innerHTML","images","index","alt","getImageURL","item","img","firstElementChild","loadImage","renderList","outerWidth","resetList","initImage","done","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","sizingImage","imageInitializing","abort","aspectRatio","min","initialImageData","renderImage","marginLeft","marginTop","viewing","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","bind","canvas","onClick","click","onDragStart","dragstart","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","onWheel","wheel","passive","capture","onDblclick","dblclick","unbind","target","action","isTrusted","clearTimeout","clickCanvasTimeout","played","exit","full","toggle","reset","prev","next","preventDefault","doubleClickImageTimeout","load","timeout","originalImage","parentWidth","parentHeight","filled","keyCode","which","charCode","ctrlKey","tagName","buttons","showing","hiding","pointerType","changedTouches","touch","identifier","isSwitchable","change","imageClicked","setTimeout","console","log","isShown","close","open","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","player","getElementsByTagName","wheeling","delta","deltaY","wheelDelta","immediate","build","transitioning","initialOffsetWidth","hideImmediately","onViewerTransitionEnd","onImageTransitionEnd","zoomTo","querySelector","onViewed","onLoad","complete","maxIndex","move","offsetX","offsetY","moveTo","x","y","changed","hasTooltip","_originalEvent","_zoomable","newWidth","newHeight","oldRatio","originalEvent","offset","center","degree","rotateTo","scale","total","onLoadWhenPlay","requestFullscreen","referrerPolicy","playing","exitFullscreen","tooltipBox","textContent","round","tooltipping","fading","update","isImg","destroy","querySelectorAll","changedIndexes","changedIndex","destroyed","delaying","initializing","onStart","undefined","parseFloat","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","absoluteOffsetX","p","AnotherViewer","Viewer","nodeType","Error","DEFAULTS","init","progress","template","TEMPLATE","custom","zoomButtons","slice","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling","noConflict","setDefaults","events","handlers","methods","others"],"mappings":"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"}