{"version":3,"file":"viewer.js","sources":["../src/js/defaults.js","../src/js/template.js","../src/js/constants.js","../src/js/utilities.js","../src/js/render.js","../src/js/events.js","../src/js/handlers.js","../src/js/methods.js","../src/js/others.js","../src/js/viewer.js"],"sourcesContent":["export default {\n  /**\n   * Enable a modal backdrop, specify `static` for a backdrop\n   * which doesn't close the modal on click.\n   * @type {boolean}\n   */\n  backdrop: true,\n\n  /**\n   * Show the button on the top-right of the viewer.\n   * @type {boolean}\n   */\n  button: true,\n\n  /**\n   * Show the navbar.\n   * @type {boolean | number}\n   */\n  navbar: true,\n\n  /**\n   * Specify the visibility and the content of the title.\n   * @type {boolean | number | Function | Array}\n   */\n  title: true,\n\n  /**\n   * Show the toolbar.\n   * @type {boolean | number | Object}\n   */\n  toolbar: true,\n\n  /**\n   * Custom class name(s) to add to the viewer's root element.\n   * @type {string}\n   */\n  className: '',\n\n  /**\n   * Define where to put the viewer in modal mode.\n   * @type {string | Element}\n   */\n  container: 'body',\n\n  /**\n   * Filter the images for viewing. Return true if the image is viewable.\n   * @type {Function}\n   */\n  filter: null,\n\n  /**\n   * Enable to request fullscreen when play.\n   * @type {boolean}\n   */\n  fullscreen: true,\n\n  /**\n   * Define the extra attributes to inherit from the original image.\n   * @type {Array}\n   */\n  inheritedAttributes: [\n    'crossOrigin',\n    'decoding',\n    'isMap',\n    'loading',\n    'referrerPolicy',\n    'sizes',\n    'srcset',\n    'useMap',\n  ],\n\n  /**\n   * Define the initial index of image for viewing.\n   * @type {number}\n   */\n  initialViewIndex: 0,\n\n  /**\n   * Enable inline mode.\n   * @type {boolean}\n   */\n  inline: false,\n\n  /**\n   * The amount of time to delay between automatically cycling an image when playing.\n   * @type {number}\n   */\n  interval: 5000,\n\n  /**\n   * Enable keyboard support.\n   * @type {boolean}\n   */\n  keyboard: true,\n\n  /**\n   * Indicate if show a loading spinner when load image or not.\n   * @type {boolean}\n   */\n  loading: true,\n\n  /**\n   * Indicate if enable loop viewing or not.\n   * @type {boolean}\n   */\n  loop: true,\n\n  /**\n   * Min width of the viewer in inline mode.\n   * @type {number}\n   */\n  minWidth: 200,\n\n  /**\n   * Min height of the viewer in inline mode.\n   * @type {number}\n   */\n  minHeight: 100,\n\n  /**\n   * Enable to move the image.\n   * @type {boolean}\n   */\n  movable: true,\n\n  /**\n   * Enable to rotate the image.\n   * @type {boolean}\n   */\n  rotatable: true,\n\n  /**\n   * Enable to scale the image.\n   * @type {boolean}\n   */\n  scalable: true,\n\n  /**\n   * Enable to zoom the image.\n   * @type {boolean}\n   */\n  zoomable: true,\n\n  /**\n   * Enable to zoom the current image by dragging on the touch screen.\n   * @type {boolean}\n   */\n  zoomOnTouch: true,\n\n  /**\n   * Enable to zoom the image by wheeling mouse.\n   * @type {boolean}\n   */\n  zoomOnWheel: true,\n\n  /**\n   * Enable to slide to the next or previous image by swiping on the touch screen.\n   * @type {boolean}\n   */\n  slideOnTouch: true,\n\n  /**\n   * Indicate if toggle the image size between its natural size\n   * and initial size when double click on the image or not.\n   * @type {boolean}\n   */\n  toggleOnDblclick: true,\n\n  /**\n   * Show the tooltip with image ratio (percentage) when zoom in or zoom out.\n   * @type {boolean}\n   */\n  tooltip: true,\n\n  /**\n   * Enable CSS3 Transition for some special elements.\n   * @type {boolean}\n   */\n  transition: true,\n\n  /**\n   * Define the CSS `z-index` value of viewer in modal mode.\n   * @type {number}\n   */\n  zIndex: 2015,\n\n  /**\n   * Define the CSS `z-index` value of viewer in inline mode.\n   * @type {number}\n   */\n  zIndexInline: 0,\n\n  /**\n   * Define the ratio when zoom the image by wheeling mouse.\n   * @type {number}\n   */\n  zoomRatio: 0.1,\n\n  /**\n   * Define the min ratio of the image when zoom out.\n   * @type {number}\n   */\n  minZoomRatio: 0.01,\n\n  /**\n   * Define the max ratio of the image when zoom in.\n   * @type {number}\n   */\n  maxZoomRatio: 100,\n\n  /**\n   * Define where to get the original image URL for viewing.\n   * @type {string | Function}\n   */\n  url: 'src',\n\n  /**\n   * Event shortcuts.\n   * @type {Function}\n   */\n  ready: null,\n  show: null,\n  shown: null,\n  hide: null,\n  hidden: null,\n  view: null,\n  viewed: null,\n  zoom: null,\n  zoomed: null,\n  play: null,\n  stop: null,\n};\n","export default (\n  '<div class=\"viewer-container-custom\"><div class=\"viewer-container\" touch-action=\"none\">'\n    + '<div class=\"viewer-canvas\"></div>'\n    + '<div class=\"viewer-footer\">'\n      + '<div class=\"viewer-title\"></div>'\n      + '<div class=\"viewer-toolbar\"></div>'\n      + '<div class=\"viewer-navbar\">'\n        + '<ul class=\"viewer-list\"></ul>'\n      + '</div>'\n    + '</div>'\n    + '<div class=\"viewer-tooltip\"></div>'\n    + '<div role=\"button\" class=\"viewer-button\" data-viewer-action=\"mix\"></div>'\n    + '<div class=\"viewer-player\"></div>'\n  + '</div></div>'\n);\n","export const IS_BROWSER = typeof window !== 'undefined' && typeof window.document !== 'undefined';\nexport const WINDOW = IS_BROWSER ? window : {};\nexport const IS_TOUCH_DEVICE = IS_BROWSER && WINDOW.document.documentElement ? 'ontouchstart' in WINDOW.document.documentElement : false;\nexport const HAS_POINTER_EVENT = IS_BROWSER ? 'PointerEvent' in WINDOW : false;\nexport const NAMESPACE = 'viewer';\n\n// Actions\nexport const ACTION_MOVE = 'move';\nexport const ACTION_SWITCH = 'switch';\nexport const ACTION_ZOOM = 'zoom';\n\n// Classes\nexport const CLASS_ACTIVE = `${NAMESPACE}-active`;\nexport const CLASS_CLOSE = `${NAMESPACE}-close`;\nexport const CLASS_FADE = `${NAMESPACE}-fade`;\nexport const CLASS_FIXED = `${NAMESPACE}-fixed`;\nexport const CLASS_FULLSCREEN = `${NAMESPACE}-fullscreen`;\nexport const CLASS_FULLSCREEN_EXIT = `${NAMESPACE}-fullscreen-exit`;\nexport const CLASS_HIDE = `${NAMESPACE}-hide`;\nexport const CLASS_HIDE_MD_DOWN = `${NAMESPACE}-hide-md-down`;\nexport const CLASS_HIDE_SM_DOWN = `${NAMESPACE}-hide-sm-down`;\nexport const CLASS_HIDE_XS_DOWN = `${NAMESPACE}-hide-xs-down`;\nexport const CLASS_IN = `${NAMESPACE}-in`;\nexport const CLASS_INVISIBLE = `${NAMESPACE}-invisible`;\nexport const CLASS_LOADING = `${NAMESPACE}-loading`;\nexport const CLASS_MOVE = `${NAMESPACE}-move`;\nexport const CLASS_OPEN = `${NAMESPACE}-open`;\nexport const CLASS_SHOW = `${NAMESPACE}-show`;\nexport const CLASS_TRANSITION = `${NAMESPACE}-transition`;\n\n// Events\nexport const EVENT_CLICK = 'click';\nexport const EVENT_DBLCLICK = 'dblclick';\nexport const EVENT_DRAG_START = 'dragstart';\nexport const EVENT_HIDDEN = 'hidden';\nexport const EVENT_HIDE = 'hide';\nexport const EVENT_KEY_DOWN = 'keydown';\nexport const EVENT_LOAD = 'load';\nexport const EVENT_TOUCH_START = IS_TOUCH_DEVICE ? 'touchstart' : 'mousedown';\nexport const EVENT_TOUCH_MOVE = IS_TOUCH_DEVICE ? 'touchmove' : 'mousemove';\nexport const EVENT_TOUCH_END = IS_TOUCH_DEVICE ? 'touchend touchcancel' : 'mouseup';\nexport const EVENT_POINTER_DOWN = HAS_POINTER_EVENT ? 'pointerdown' : EVENT_TOUCH_START;\nexport const EVENT_POINTER_MOVE = HAS_POINTER_EVENT ? 'pointermove' : EVENT_TOUCH_MOVE;\nexport const EVENT_POINTER_UP = HAS_POINTER_EVENT ? 'pointerup pointercancel' : EVENT_TOUCH_END;\nexport const EVENT_READY = 'ready';\nexport const EVENT_RESIZE = 'resize';\nexport const EVENT_SHOW = 'show';\nexport const EVENT_SHOWN = 'shown';\nexport const EVENT_TRANSITION_END = 'transitionend';\nexport const EVENT_VIEW = 'view';\nexport const EVENT_VIEWED = 'viewed';\nexport const EVENT_WHEEL = 'wheel';\nexport const EVENT_ZOOM = 'zoom';\nexport const EVENT_ZOOMED = 'zoomed';\nexport const EVENT_PLAY = 'play';\nexport const EVENT_STOP = 'stop';\n\n// Data keys\nexport const DATA_ACTION = `${NAMESPACE}Action`;\n\n// RegExps\nexport const REGEXP_SPACES = /\\s\\s*/;\n\n// Misc\nexport const BUTTONS = [\n  'zoom-in',\n  'zoom-out',\n  'one-to-one',\n  'reset',\n  'prev',\n  'play',\n  'next',\n  'rotate-left',\n  'rotate-right',\n  'flip-horizontal',\n  'flip-vertical',\n];\n","import {\n  CLASS_HIDE_MD_DOWN,\n  CLASS_HIDE_SM_DOWN,\n  CLASS_HIDE_XS_DOWN,\n  IS_BROWSER,\n  REGEXP_SPACES,\n  WINDOW,\n} from './constants';\n\n/**\n * Check if the given value is a string.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a string, else `false`.\n */\nexport function isString(value) {\n  return typeof value === 'string';\n}\n\n/**\n * Check if the given value is not a number.\n */\nexport const isNaN = Number.isNaN || WINDOW.isNaN;\n\n/**\n * Check if the given value is a number.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a number, else `false`.\n */\nexport function isNumber(value) {\n  return typeof value === 'number' && !isNaN(value);\n}\n\n/**\n * Check if the given value is undefined.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is undefined, else `false`.\n */\nexport function isUndefined(value) {\n  return typeof value === 'undefined';\n}\n\n/**\n * Check if the given value is an object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is an object, else `false`.\n */\nexport function isObject(value) {\n  return typeof value === 'object' && value !== null;\n}\n\nconst { hasOwnProperty } = Object.prototype;\n\n/**\n * Check if the given value is a plain object.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a plain object, else `false`.\n */\nexport function isPlainObject(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n\n  try {\n    const { constructor } = value;\n    const { prototype } = constructor;\n\n    return constructor && prototype && hasOwnProperty.call(prototype, 'isPrototypeOf');\n  } catch (error) {\n    return false;\n  }\n}\n\n/**\n * Check if the given value is a function.\n * @param {*} value - The value to check.\n * @returns {boolean} Returns `true` if the given value is a function, else `false`.\n */\nexport function isFunction(value) {\n  return typeof value === 'function';\n}\n\n/**\n * Iterate the given data.\n * @param {*} data - The data to iterate.\n * @param {Function} callback - The process function for each element.\n * @returns {*} The original data.\n */\nexport function forEach(data, callback) {\n  if (data && isFunction(callback)) {\n    if (Array.isArray(data) || isNumber(data.length)/* array-like */) {\n      const { length } = data;\n      let i;\n\n      for (i = 0; i < length; i += 1) {\n        if (callback.call(data, data[i], i, data) === false) {\n          break;\n        }\n      }\n    } else if (isObject(data)) {\n      Object.keys(data).forEach((key) => {\n        callback.call(data, data[key], key, data);\n      });\n    }\n  }\n\n  return data;\n}\n\n/**\n * Extend the given object.\n * @param {*} obj - The object to be extended.\n * @param {*} args - The rest objects which will be merged to the first object.\n * @returns {Object} The extended object.\n */\nexport const assign = Object.assign || function assign(obj, ...args) {\n  if (isObject(obj) && args.length > 0) {\n    args.forEach((arg) => {\n      if (isObject(arg)) {\n        Object.keys(arg).forEach((key) => {\n          obj[key] = arg[key];\n        });\n      }\n    });\n  }\n\n  return obj;\n};\n\nconst REGEXP_SUFFIX = /^(?:width|height|left|top|marginLeft|marginTop)$/;\n\n/**\n * Apply styles to the given element.\n * @param {Element} element - The target element.\n * @param {Object} styles - The styles for applying.\n */\nexport function setStyle(element, styles) {\n  const { style } = element;\n\n  forEach(styles, (value, property) => {\n    if (REGEXP_SUFFIX.test(property) && isNumber(value)) {\n      value += 'px';\n    }\n\n    style[property] = value;\n  });\n}\n\n/**\n * Escape a string for using in HTML.\n * @param {String} value - The string to escape.\n * @returns {String} Returns the escaped string.\n */\nexport function escapeHTMLEntities(value) {\n  return isString(value) ? value\n    .replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g, '&amp;')\n    .replace(/\"/g, '&quot;')\n    .replace(/'/g, '&#39;')\n    .replace(/</g, '&lt;')\n    .replace(/>/g, '&gt;') : value;\n}\n\n/**\n * Check if the given element has a special class.\n * @param {Element} element - The element to check.\n * @param {string} value - The class to search.\n * @returns {boolean} Returns `true` if the special class was found.\n */\nexport function hasClass(element, value) {\n  if (!element || !value) {\n    return false;\n  }\n\n  return element.classList\n    ? element.classList.contains(value)\n    : element.className.indexOf(value) > -1;\n}\n\n/**\n * Add classes to the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be added.\n */\nexport function addClass(element, value) {\n  if (!element || !value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, (elem) => {\n      addClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.add(value);\n    return;\n  }\n\n  const className = element.className.trim();\n\n  if (!className) {\n    element.className = value;\n  } else if (className.indexOf(value) < 0) {\n    element.className = `${className} ${value}`;\n  }\n}\n\n/**\n * Remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be removed.\n */\nexport function removeClass(element, value) {\n  if (!element || !value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, (elem) => {\n      removeClass(elem, value);\n    });\n    return;\n  }\n\n  if (element.classList) {\n    element.classList.remove(value);\n    return;\n  }\n\n  if (element.className.indexOf(value) >= 0) {\n    element.className = element.className.replace(value, '');\n  }\n}\n\n/**\n * Add or remove classes from the given element.\n * @param {Element} element - The target element.\n * @param {string} value - The classes to be toggled.\n * @param {boolean} added - Add only.\n */\nexport function toggleClass(element, value, added) {\n  if (!value) {\n    return;\n  }\n\n  if (isNumber(element.length)) {\n    forEach(element, (elem) => {\n      toggleClass(elem, value, added);\n    });\n    return;\n  }\n\n  // IE10-11 doesn't support the second parameter of `classList.toggle`\n  if (added) {\n    addClass(element, value);\n  } else {\n    removeClass(element, value);\n  }\n}\n\nconst REGEXP_HYPHENATE = /([a-z\\d])([A-Z])/g;\n\n/**\n * Transform the given string from camelCase to kebab-case\n * @param {string} value - The value to transform.\n * @returns {string} The transformed value.\n */\nexport function hyphenate(value) {\n  return value.replace(REGEXP_HYPHENATE, '$1-$2').toLowerCase();\n}\n\n/**\n * Get data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to get.\n * @returns {string} The data value.\n */\nexport function getData(element, name) {\n  if (isObject(element[name])) {\n    return element[name];\n  }\n\n  if (element.dataset) {\n    return element.dataset[name];\n  }\n\n  return element.getAttribute(`data-${hyphenate(name)}`);\n}\n\n/**\n * Set data to the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to set.\n * @param {string} data - The data value.\n */\nexport function setData(element, name, data) {\n  if (isObject(data)) {\n    element[name] = data;\n  } else if (element.dataset) {\n    element.dataset[name] = data;\n  } else {\n    element.setAttribute(`data-${hyphenate(name)}`, data);\n  }\n}\n\n/**\n * Remove data from the given element.\n * @param {Element} element - The target element.\n * @param {string} name - The data key to remove.\n */\nexport function removeData(element, name) {\n  if (isObject(element[name])) {\n    try {\n      delete element[name];\n    } catch (error) {\n      element[name] = undefined;\n    }\n  } else if (element.dataset) {\n    // #128 Safari not allows to delete dataset property\n    try {\n      delete element.dataset[name];\n    } catch (error) {\n      element.dataset[name] = undefined;\n    }\n  } else {\n    element.removeAttribute(`data-${hyphenate(name)}`);\n  }\n}\n\nconst onceSupported = (() => {\n  let supported = false;\n\n  if (IS_BROWSER) {\n    let once = false;\n    const listener = () => {};\n    const options = Object.defineProperty({}, 'once', {\n      get() {\n        supported = true;\n        return once;\n      },\n\n      /**\n       * This setter can fix a `TypeError` in strict mode\n       * {@link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Errors/Getter_only}\n       * @param {boolean} value - The value to set\n       */\n      set(value) {\n        once = value;\n      },\n    });\n\n    WINDOW.addEventListener('test', listener, options);\n    WINDOW.removeEventListener('test', listener, options);\n  }\n\n  return supported;\n})();\n\n/**\n * Remove event listener from the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nexport function removeListener(element, type, listener, options = {}) {\n  let handler = listener;\n\n  type.trim().split(REGEXP_SPACES).forEach((event) => {\n    if (!onceSupported) {\n      const { listeners } = element;\n\n      if (listeners && listeners[event] && listeners[event][listener]) {\n        handler = listeners[event][listener];\n        delete listeners[event][listener];\n\n        if (Object.keys(listeners[event]).length === 0) {\n          delete listeners[event];\n        }\n\n        if (Object.keys(listeners).length === 0) {\n          delete element.listeners;\n        }\n      }\n    }\n\n    element.removeEventListener(event, handler, options);\n  });\n}\n\n/**\n * Add event listener to the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Function} listener - The event listener.\n * @param {Object} options - The event options.\n */\nexport function addListener(element, type, listener, options = {}) {\n  let handler = listener;\n\n  type.trim().split(REGEXP_SPACES).forEach((event) => {\n    if (options.once && !onceSupported) {\n      const { listeners = {} } = element;\n\n      handler = (...args) => {\n        delete listeners[event][listener];\n        element.removeEventListener(event, handler, options);\n        listener.apply(element, args);\n      };\n\n      if (!listeners[event]) {\n        listeners[event] = {};\n      }\n\n      if (listeners[event][listener]) {\n        element.removeEventListener(event, listeners[event][listener], options);\n      }\n\n      listeners[event][listener] = handler;\n      element.listeners = listeners;\n    }\n\n    element.addEventListener(event, handler, options);\n  });\n}\n\n/**\n * Dispatch event on the target element.\n * @param {Element} element - The event target.\n * @param {string} type - The event type(s).\n * @param {Object} data - The additional event data.\n * @param {Object} options - The additional event options.\n * @returns {boolean} Indicate if the event is default prevented or not.\n */\nexport function dispatchEvent(element, type, data, options) {\n  let event;\n\n  // Event and CustomEvent on IE9-11 are global objects, not constructors\n  if (isFunction(Event) && isFunction(CustomEvent)) {\n    event = new CustomEvent(type, {\n      bubbles: true,\n      cancelable: true,\n      detail: data,\n      ...options,\n    });\n  } else {\n    event = document.createEvent('CustomEvent');\n    event.initCustomEvent(type, true, true, data);\n  }\n\n  return element.dispatchEvent(event);\n}\n\n/**\n * Get the offset base on the document.\n * @param {Element} element - The target element.\n * @returns {Object} The offset data.\n */\nexport function getOffset(element) {\n  const box = element.getBoundingClientRect();\n\n  return {\n    left: box.left + (window.pageXOffset - document.documentElement.clientLeft),\n    top: box.top + (window.pageYOffset - document.documentElement.clientTop),\n  };\n}\n\n/**\n * Get transforms base on the given object.\n * @param {Object} obj - The target object.\n * @returns {string} A string contains transform values.\n */\nexport function getTransforms({\n  rotate,\n  scaleX,\n  scaleY,\n  translateX,\n  translateY,\n}) {\n  const values = [];\n\n  if (isNumber(translateX) && translateX !== 0) {\n    values.push(`translateX(${translateX}px)`);\n  }\n\n  if (isNumber(translateY) && translateY !== 0) {\n    values.push(`translateY(${translateY}px)`);\n  }\n\n  // Rotate should come first before scale to match orientation transform\n  if (isNumber(rotate) && rotate !== 0) {\n    values.push(`rotate(${rotate}deg)`);\n  }\n\n  if (isNumber(scaleX) && scaleX !== 1) {\n    values.push(`scaleX(${scaleX})`);\n  }\n\n  if (isNumber(scaleY) && scaleY !== 1) {\n    values.push(`scaleY(${scaleY})`);\n  }\n\n  const transform = values.length ? values.join(' ') : 'none';\n\n  return {\n    WebkitTransform: transform,\n    msTransform: transform,\n    transform,\n  };\n}\n\n/**\n * Get an image name from an image url.\n * @param {string} url - The target url.\n * @example\n * // picture.jpg\n * getImageNameFromURL('https://domain.com/path/to/picture.jpg?size=1280×960')\n * @returns {string} A string contains the image name.\n */\nexport function getImageNameFromURL(url) {\n  return isString(url) ? decodeURIComponent(url.replace(/^.*\\//, '').replace(/[?&#].*$/, '')) : '';\n}\n\nconst IS_SAFARI = WINDOW.navigator && /(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(WINDOW.navigator.userAgent);\n\n/**\n * Get an image's natural sizes.\n * @param {string} image - The target image.\n * @param {Object} options - The viewer options.\n * @param {Function} callback - The callback function.\n * @returns {HTMLImageElement} The new image.\n */\nexport function getImageNaturalSizes(image, options, callback) {\n  const newImage = document.createElement('img');\n\n  // Modern browsers (except Safari)\n  if (image.naturalWidth && !IS_SAFARI) {\n    callback(image.naturalWidth, image.naturalHeight);\n    return newImage;\n  }\n\n  const body = document.body || document.documentElement;\n\n  newImage.onload = () => {\n    callback(newImage.width, newImage.height);\n\n    if (!IS_SAFARI) {\n      body.removeChild(newImage);\n    }\n  };\n\n  forEach(options.inheritedAttributes, (name) => {\n    const value = image.getAttribute(name);\n\n    if (value !== null) {\n      newImage.setAttribute(name, value);\n    }\n  });\n\n  newImage.src = image.src;\n\n  // iOS Safari will convert the image automatically\n  // with its orientation once append it into DOM\n  if (!IS_SAFARI) {\n    newImage.style.cssText = (\n      'left:0;'\n      + 'max-height:none!important;'\n      + 'max-width:none!important;'\n      + 'min-height:0!important;'\n      + 'min-width:0!important;'\n      + 'opacity:0;'\n      + 'position:absolute;'\n      + 'top:0;'\n      + 'z-index:-1;'\n    );\n    body.appendChild(newImage);\n  }\n\n  return newImage;\n}\n\n/**\n * Get the related class name of a responsive type number.\n * @param {string} type - The responsive type.\n * @returns {string} The related class name.\n */\nexport function getResponsiveClass(type) {\n  switch (type) {\n    case 2:\n      return CLASS_HIDE_XS_DOWN;\n\n    case 3:\n      return CLASS_HIDE_SM_DOWN;\n\n    case 4:\n      return CLASS_HIDE_MD_DOWN;\n\n    default:\n      return '';\n  }\n}\n\n/**\n * Get the max ratio of a group of pointers.\n * @param {string} pointers - The target pointers.\n * @returns {number} The result ratio.\n */\nexport function getMaxZoomRatio(pointers) {\n  const pointers2 = { ...pointers };\n  const ratios = [];\n\n  forEach(pointers, (pointer, pointerId) => {\n    delete pointers2[pointerId];\n\n    forEach(pointers2, (pointer2) => {\n      const x1 = Math.abs(pointer.startX - pointer2.startX);\n      const y1 = Math.abs(pointer.startY - pointer2.startY);\n      const x2 = Math.abs(pointer.endX - pointer2.endX);\n      const y2 = Math.abs(pointer.endY - pointer2.endY);\n      const z1 = Math.sqrt((x1 * x1) + (y1 * y1));\n      const z2 = Math.sqrt((x2 * x2) + (y2 * y2));\n      const ratio = (z2 - z1) / z1;\n\n      ratios.push(ratio);\n    });\n  });\n\n  ratios.sort((a, b) => Math.abs(a) < Math.abs(b));\n\n  return ratios[0];\n}\n\n/**\n * Get a pointer from an event object.\n * @param {Object} event - The target event object.\n * @param {boolean} endOnly - Indicates if only returns the end point coordinate or not.\n * @returns {Object} The result pointer contains start and/or end point coordinates.\n */\nexport function getPointer({ pageX, pageY }, endOnly) {\n  const end = {\n    endX: pageX,\n    endY: pageY,\n  };\n\n  return endOnly ? end : ({\n    timeStamp: Date.now(),\n    startX: pageX,\n    startY: pageY,\n    ...end,\n  });\n}\n\n/**\n * Get the center point coordinate of a group of pointers.\n * @param {Object} pointers - The target pointers.\n * @returns {Object} The center point coordinate.\n */\nexport function getPointersCenter(pointers) {\n  let pageX = 0;\n  let pageY = 0;\n  let count = 0;\n\n  forEach(pointers, ({ startX, startY }) => {\n    pageX += startX;\n    pageY += startY;\n    count += 1;\n  });\n\n  pageX /= count;\n  pageY /= count;\n\n  return {\n    pageX,\n    pageY,\n  };\n}\n","import {\n  CLASS_LOADING,\n  CLASS_TRANSITION,\n  EVENT_LOAD,\n  EVENT_TRANSITION_END,\n  EVENT_VIEWED,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  forEach,\n  getImageNameFromURL,\n  getImageNaturalSizes,\n  getTransforms,\n  removeClass,\n  removeListener,\n  setData,\n  setStyle,\n} from './utilities';\n\nexport default {\n  render() {\n    this.initContainer();\n    this.initViewer();\n    this.initList();\n    this.renderViewer();\n  },\n\n  initBody() {\n    const { ownerDocument } = this.element;\n    const body = ownerDocument.body || ownerDocument.documentElement;\n\n    this.body = body;\n    this.scrollbarWidth = window.innerWidth - ownerDocument.documentElement.clientWidth;\n    this.initialBodyPaddingRight = body.style.paddingRight;\n    this.initialBodyComputedPaddingRight = window.getComputedStyle(body).paddingRight;\n  },\n\n  initContainer() {\n    this.containerData = {\n      width: window.innerWidth,\n      height: window.innerHeight,\n    }; \n  //  if(this.options.width){\n  //   this.containerData.width=this.options.width\n  //  }\n\n  //   if(this.options.height){\n  //     this.containerData.height=this.options.height\n  //   }\n  },\n\n  initViewer() {\n    const { options, parent } = this;\n    let viewerData;\n\n    if (options.inline) {\n      viewerData = {\n        width: Math.max(parent.offsetWidth, options.minWidth),\n        height: Math.max(parent.offsetHeight, options.minHeight),\n      };\n\n      this.parentData = viewerData;\n    }\n\n    if (this.fulled || !viewerData) {\n      viewerData = this.containerData;\n    }\n\n    this.viewerData = assign({}, viewerData);\n  },\n\n  renderViewer() {\n    if (this.options.inline && !this.fulled) {\n      setStyle(this.viewer, this.viewerData);\n    }\n  },\n\n  initList() {\n    const { element, options, list } = this;\n    const items = [];\n\n    // initList may be called in this.update, so should keep idempotent\n    list.innerHTML = '';\n\n    forEach(this.images, (image, index) => {\n      const { src } = image;\n      const alt = image.alt || getImageNameFromURL(src);\n      const url = this.getImageURL(image);\n\n      if (src || url) {\n        const item = document.createElement('li');\n        const img = document.createElement('img');\n\n        forEach(options.inheritedAttributes, (name) => {\n          const value = image.getAttribute(name);\n\n          if (value !== null) {\n            img.setAttribute(name, value);\n          }\n        });\n\n        img.src = src || url;\n        img.alt = alt;\n        img.setAttribute('data-index', index);\n        img.setAttribute('data-original-url', url || src);\n        img.setAttribute('data-viewer-action', 'view');\n        img.setAttribute('role', 'button');\n        item.appendChild(img);\n        list.appendChild(item);\n        items.push(item);\n      }\n    });\n\n    this.items = items;\n\n    forEach(items, (item) => {\n      const image = item.firstElementChild;\n\n      setData(image, 'filled', true);\n\n      if (options.loading) {\n        addClass(item, CLASS_LOADING);\n      }\n\n      addListener(image, EVENT_LOAD, (event) => {\n        if (options.loading) {\n          removeClass(item, CLASS_LOADING);\n        }\n\n        this.loadImage(event);\n      }, {\n        once: true,\n      });\n    });\n\n    if (options.transition) {\n      addListener(element, EVENT_VIEWED, () => {\n        addClass(list, CLASS_TRANSITION);\n      }, {\n        once: true,\n      });\n    }\n  },\n\n  renderList(index) {\n    const i = index || this.index;\n    const width = this.items[i].offsetWidth || 30;\n    const outerWidth = width + 1; // 1 pixel of `margin-left` width\n\n    // Place the active item in the center of the screen\n    setStyle(this.list, assign({\n      width: outerWidth * this.length,\n    }, getTransforms({\n      translateX: ((this.viewerData.width - width) / 2) - (outerWidth * i),\n    })));\n  },\n\n  resetList() {\n    const { list } = this;\n\n    list.innerHTML = '';\n    removeClass(list, CLASS_TRANSITION);\n    setStyle(list, getTransforms({\n      translateX: 0,\n    }));\n  },\n\n  initImage(done) {\n    const { options, image, viewerData } = this;\n    const footerHeight = this.footer.offsetHeight;\n    const viewerWidth = viewerData.width;\n    const viewerHeight = Math.max(viewerData.height - footerHeight, footerHeight);\n    const oldImageData = this.imageData || {};\n    let sizingImage;\n\n    this.imageInitializing = {\n      abort: () => {\n        sizingImage.onload = null;\n      },\n    };\n\n    sizingImage = getImageNaturalSizes(image, options, (naturalWidth, naturalHeight) => {\n      const aspectRatio = naturalWidth / naturalHeight;\n      let width = viewerWidth;\n      let height = viewerHeight;\n\n      this.imageInitializing = false;\n\n      if (viewerHeight * aspectRatio > viewerWidth) {\n        height = viewerWidth / aspectRatio;\n      } else {\n        width = viewerHeight * aspectRatio;\n      }\n\n      width = Math.min(width * 0.9, naturalWidth);\n      height = Math.min(height * 0.9, naturalHeight);\n\n      const imageData = {\n        naturalWidth,\n        naturalHeight,\n        aspectRatio,\n        ratio: width / naturalWidth,\n        width,\n        height,\n        left: (viewerWidth - width) / 2,\n        top: (viewerHeight - height) / 2,\n      };\n      const initialImageData = assign({}, imageData);\n\n      if (options.rotatable) {\n        imageData.rotate = oldImageData.rotate || 0;\n        initialImageData.rotate = 0;\n      }\n\n      if (options.scalable) {\n        imageData.scaleX = oldImageData.scaleX || 1;\n        imageData.scaleY = oldImageData.scaleY || 1;\n        initialImageData.scaleX = 1;\n        initialImageData.scaleY = 1;\n      }\n\n      this.imageData = imageData;\n      this.initialImageData = initialImageData;\n\n      if (done) {\n        done();\n      }\n    });\n  },\n\n  renderImage(done) {\n    const { image, imageData } = this;\n\n    setStyle(image, assign({\n      width: imageData.width,\n      height: imageData.height,\n\n      // XXX: Not to use translateX/Y to avoid image shaking when zooming\n      marginLeft: imageData.left,\n      marginTop: imageData.top,\n    }, getTransforms(imageData)));\n\n    if (done) {\n      if ((this.viewing || this.zooming) && this.options.transition) {\n        const onTransitionEnd = () => {\n          this.imageRendering = false;\n          done();\n        };\n\n        this.imageRendering = {\n          abort: () => {\n            removeListener(image, EVENT_TRANSITION_END, onTransitionEnd);\n          },\n        };\n\n        addListener(image, EVENT_TRANSITION_END, onTransitionEnd, {\n          once: true,\n        });\n      } else {\n        done();\n      }\n    }\n  },\n\n  resetImage() {\n    // this.image only defined after viewed\n    if (this.viewing || this.viewed) {\n      const { image } = this;\n\n      if (this.viewing) {\n        this.viewing.abort();\n      }\n\n      image.parentNode.removeChild(image);\n      this.image = null;\n    }\n  },\n};\n","import {\n  EVENT_CLICK,\n  EVENT_DBLCLICK,\n  EVENT_DRAG_START,\n  EVENT_KEY_DOWN,\n  EVENT_POINTER_DOWN,\n  EVENT_POINTER_MOVE,\n  EVENT_POINTER_UP,\n  EVENT_RESIZE,\n  EVENT_WHEEL,\n} from './constants';\nimport {\n  addListener,\n  removeListener,\n} from './utilities';\n\nexport default {\n  bind() {\n    const { options, viewer, canvas } = this;\n    const document = this.element.ownerDocument;\n\n    addListener(viewer, EVENT_CLICK, (this.onClick = this.click.bind(this)));\n    addListener(viewer, EVENT_DRAG_START, (this.onDragStart = this.dragstart.bind(this)));\n    addListener(canvas, EVENT_POINTER_DOWN, (this.onPointerDown = this.pointerdown.bind(this)));\n    addListener(document, EVENT_POINTER_MOVE, (this.onPointerMove = this.pointermove.bind(this)));\n    addListener(document, EVENT_POINTER_UP, (this.onPointerUp = this.pointerup.bind(this)));\n    addListener(document, EVENT_KEY_DOWN, (this.onKeyDown = this.keydown.bind(this)));\n    addListener(window, EVENT_RESIZE, (this.onResize = this.resize.bind(this)));\n\n    if (options.zoomable && options.zoomOnWheel) {\n      addListener(viewer, EVENT_WHEEL, (this.onWheel = this.wheel.bind(this)), {\n        passive: false,\n        capture: true,\n      });\n    }\n\n    if (options.toggleOnDblclick) {\n      addListener(canvas, EVENT_DBLCLICK, (this.onDblclick = this.dblclick.bind(this)));\n    }\n  },\n\n  unbind() {\n    const { options, viewer, canvas } = this;\n    const document = this.element.ownerDocument;\n\n    removeListener(viewer, EVENT_CLICK, this.onClick);\n    removeListener(viewer, EVENT_DRAG_START, this.onDragStart);\n    removeListener(canvas, EVENT_POINTER_DOWN, this.onPointerDown);\n    removeListener(document, EVENT_POINTER_MOVE, this.onPointerMove);\n    removeListener(document, EVENT_POINTER_UP, this.onPointerUp);\n    removeListener(document, EVENT_KEY_DOWN, this.onKeyDown);\n    removeListener(window, EVENT_RESIZE, this.onResize);\n\n    if (options.zoomable && options.zoomOnWheel) {\n      removeListener(viewer, EVENT_WHEEL, this.onWheel, {\n        passive: false,\n        capture: true,\n      });\n    }\n\n    if (options.toggleOnDblclick) {\n      removeListener(canvas, EVENT_DBLCLICK, this.onDblclick);\n    }\n  },\n};\n","import {\n  ACTION_MOVE,\n  ACTION_SWITCH,\n  ACTION_ZOOM,\n  CLASS_INVISIBLE,\n  CLASS_LOADING,\n  CLASS_MOVE,\n  CLASS_TRANSITION,\n  DATA_ACTION,\n  EVENT_CLICK,\n  EVENT_DBLCLICK,\n  EVENT_LOAD,\n  EVENT_VIEWED,\n  IS_TOUCH_DEVICE,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  dispatchEvent,\n  forEach,\n  getData,\n  getImageNaturalSizes,\n  getPointer,\n  getTransforms,\n  isFunction,\n  isNumber,\n  removeClass,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nexport default {\n  click(event) {\n    const { target } = event;\n    const { options, imageData } = this;\n    const action = getData(target, DATA_ACTION);\n\n    // Cancel the emulated click when the native click event was triggered.\n    if (IS_TOUCH_DEVICE && event.isTrusted && target === this.canvas) {\n      clearTimeout(this.clickCanvasTimeout);\n    }\n\n    switch (action) {\n      case 'mix':\n        if (this.played) {\n          this.stop();\n        } else if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          } else {\n            this.full();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      case 'hide':\n        this.hide();\n        break;\n\n      case 'view':\n        this.view(getData(target, 'index'));\n        break;\n\n      case 'zoom-in':\n        this.zoom(0.1, true);\n        break;\n\n      case 'zoom-out':\n        this.zoom(-0.1, true);\n        break;\n\n      case 'one-to-one':\n        this.toggle();\n        break;\n\n      case 'reset':\n        this.reset();\n        break;\n\n      case 'prev':\n        this.prev(options.loop);\n        break;\n\n      case 'play':\n        this.play(options.fullscreen);\n        break;\n\n      case 'next':\n        this.next(options.loop);\n        break;\n\n      case 'rotate-left':\n        this.rotate(-90);\n        break;\n\n      case 'rotate-right':\n        this.rotate(90);\n        break;\n\n      case 'flip-horizontal':\n        this.scaleX(-imageData.scaleX || -1);\n        break;\n\n      case 'flip-vertical':\n        this.scaleY(-imageData.scaleY || -1);\n        break;\n\n      default:\n        if (this.played) {\n          this.stop();\n        }\n    }\n  },\n\n  dblclick(event) {\n    event.preventDefault();\n\n    if (this.viewed && event.target === this.image) {\n      // Cancel the emulated double click when the native dblclick event was triggered.\n      if (IS_TOUCH_DEVICE && event.isTrusted) {\n        clearTimeout(this.doubleClickImageTimeout);\n      }\n\n      this.toggle();\n    }\n  },\n\n  load() {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = false;\n    }\n\n    const {\n      element,\n      options,\n      image,\n      index,\n      viewerData,\n    } = this;\n\n    removeClass(image, CLASS_INVISIBLE);\n\n    if (options.loading) {\n      removeClass(this.canvas, CLASS_LOADING);\n    }\n\n    image.style.cssText = (\n      'height:0;'\n      + `margin-left:${viewerData.width / 2}px;`\n      + `margin-top:${viewerData.height / 2}px;`\n      + 'max-width:none!important;'\n      + 'position:absolute;'\n      + 'width:0;'\n    );\n\n    this.initImage(() => {\n      toggleClass(image, CLASS_MOVE, options.movable);\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n\n      this.renderImage(() => {\n        this.viewed = true;\n        this.viewing = false;\n\n        if (isFunction(options.viewed)) {\n          addListener(element, EVENT_VIEWED, options.viewed, {\n            once: true,\n          });\n        }\n\n        dispatchEvent(element, EVENT_VIEWED, {\n          originalImage: this.images[index],\n          index,\n          image,\n        }, {\n          cancelable: false,\n        });\n      });\n    });\n  },\n\n  loadImage(event) {\n    const image = event.target;\n    const parent = image.parentNode;\n    const parentWidth = parent.offsetWidth || 30;\n    const parentHeight = parent.offsetHeight || 50;\n    const filled = !!getData(image, 'filled');\n\n    getImageNaturalSizes(image, this.options, (naturalWidth, naturalHeight) => {\n      const aspectRatio = naturalWidth / naturalHeight;\n      let width = parentWidth;\n      let height = parentHeight;\n\n      if (parentHeight * aspectRatio > parentWidth) {\n        if (filled) {\n          width = parentHeight * aspectRatio;\n        } else {\n          height = parentWidth / aspectRatio;\n        }\n      } else if (filled) {\n        height = parentWidth / aspectRatio;\n      } else {\n        width = parentHeight * aspectRatio;\n      }\n\n      setStyle(image, assign({\n        width,\n        height,\n      }, getTransforms({\n        translateX: (parentWidth - width) / 2,\n        translateY: (parentHeight - height) / 2,\n      })));\n    });\n  },\n\n  keydown(event) {\n    const { options } = this;\n\n    if (!this.fulled || !options.keyboard) {\n      return;\n    }\n\n    switch (event.keyCode || event.which || event.charCode) {\n      // Escape\n      case 27:\n        if (this.played) {\n          this.stop();\n        } else if (options.inline) {\n          if (this.fulled) {\n            this.exit();\n          }\n        } else {\n          this.hide();\n        }\n\n        break;\n\n      // Space\n      case 32:\n        if (this.played) {\n          this.stop();\n        }\n\n        break;\n\n      // ArrowLeft\n      case 37:\n        this.prev(options.loop);\n        break;\n\n      // ArrowUp\n      case 38:\n        // Prevent scroll on Firefox\n        event.preventDefault();\n\n        // Zoom in\n        this.zoom(options.zoomRatio, true);\n        break;\n\n      // ArrowRight\n      case 39:\n        this.next(options.loop);\n        break;\n\n      // ArrowDown\n      case 40:\n        // Prevent scroll on Firefox\n        event.preventDefault();\n\n        // Zoom out\n        this.zoom(-options.zoomRatio, true);\n        break;\n\n      // Ctrl + 0\n      case 48:\n        // Fall through\n\n      // Ctrl + 1\n      // eslint-disable-next-line no-fallthrough\n      case 49:\n        if (event.ctrlKey) {\n          event.preventDefault();\n          this.toggle();\n        }\n\n        break;\n\n      default:\n    }\n  },\n\n  dragstart(event) {\n    if (event.target.tagName.toLowerCase() === 'img') {\n      event.preventDefault();\n    }\n  },\n\n  pointerdown(event) {\n    const { options, pointers } = this;\n    const { buttons, button } = event;\n\n    if (\n      !this.viewed\n      || this.showing\n      || this.viewing\n      || this.hiding\n\n      // Handle mouse event and pointer event and ignore touch event\n      || ((\n        event.type === 'mousedown'\n        || (event.type === 'pointerdown' && event.pointerType === 'mouse')\n      ) && (\n        // No primary button (Usually the left button)\n        (isNumber(buttons) && buttons !== 1)\n        || (isNumber(button) && button !== 0)\n\n        // Open context menu\n        || event.ctrlKey\n      ))\n    ) {\n      return;\n    }\n\n    // Prevent default behaviours as page zooming in touch devices.\n    event.preventDefault();\n\n    if (event.changedTouches) {\n      forEach(event.changedTouches, (touch) => {\n        pointers[touch.identifier] = getPointer(touch);\n      });\n    } else {\n      pointers[event.pointerId || 0] = getPointer(event);\n    }\n\n    let action = options.movable ? ACTION_MOVE : false;\n\n    if (options.zoomOnTouch && options.zoomable && Object.keys(pointers).length > 1) {\n      action = ACTION_ZOOM;\n    } else if (options.slideOnTouch && (event.pointerType === 'touch' || event.type === 'touchstart') && this.isSwitchable()) {\n      action = ACTION_SWITCH;\n    }\n\n    if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n      removeClass(this.image, CLASS_TRANSITION);\n    }\n\n    this.action = action;\n  },\n\n  pointermove(event) {\n    const { pointers, action } = this;\n\n    if (!this.viewed || !action) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (event.changedTouches) {\n      forEach(event.changedTouches, (touch) => {\n        assign(pointers[touch.identifier] || {}, getPointer(touch, true));\n      });\n    } else {\n      assign(pointers[event.pointerId || 0] || {}, getPointer(event, true));\n    }\n\n    this.change(event);\n  },\n\n  pointerup(event) {\n    const { options, action, pointers } = this;\n    let pointer;\n\n    if (event.changedTouches) {\n      forEach(event.changedTouches, (touch) => {\n        pointer = pointers[touch.identifier];\n        delete pointers[touch.identifier];\n      });\n    } else {\n      pointer = pointers[event.pointerId || 0];\n      delete pointers[event.pointerId || 0];\n    }\n\n    if (!action) {\n      return;\n    }\n\n    event.preventDefault();\n\n    if (options.transition && (action === ACTION_MOVE || action === ACTION_ZOOM)) {\n      addClass(this.image, CLASS_TRANSITION);\n    }\n\n    this.action = false;\n\n    // Emulate click and double click in touch devices to support backdrop and image zooming (#210).\n    if (\n      IS_TOUCH_DEVICE\n      && action !== ACTION_ZOOM\n      && pointer\n      && (Date.now() - pointer.timeStamp < 500)\n    ) {\n      clearTimeout(this.clickCanvasTimeout);\n      clearTimeout(this.doubleClickImageTimeout);\n\n      if (options.toggleOnDblclick && this.viewed && event.target === this.image) {\n        if (this.imageClicked) {\n          this.imageClicked = false;\n\n          // This timeout will be cleared later when a native dblclick event is triggering\n          this.doubleClickImageTimeout = setTimeout(() => {\n            dispatchEvent(this.image, EVENT_DBLCLICK);\n          }, 50);\n        } else {\n          this.imageClicked = true;\n\n          // The default timing of a double click in Windows is 500 ms\n          this.doubleClickImageTimeout = setTimeout(() => {\n            this.imageClicked = false;\n          }, 500);\n        }\n      } else {\n        this.imageClicked = false;\n\n        if (options.backdrop && options.backdrop !== 'static' && event.target === this.canvas) {\n          // This timeout will be cleared later when a native click event is triggering\n          this.clickCanvasTimeout = setTimeout(() => {\n            dispatchEvent(this.canvas, EVENT_CLICK);\n          }, 50);\n        }\n      }\n    }\n  },\n\n  resize() {\n    console.log(123,this)\n    if (!this.isShown || this.hiding) {\n      return;\n    }\n\n    if (this.fulled) {\n      this.close();\n      this.initBody();\n      this.open();\n    }\n\n    this.initContainer();\n    this.initViewer();\n    this.renderViewer();\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage();\n      });\n    }\n\n    if (this.played) {\n      if (this.options.fullscreen && this.fulled && !(\n        document.fullscreenElement\n        || document.webkitFullscreenElement\n        || document.mozFullScreenElement\n        || document.msFullscreenElement\n      )) {\n        this.stop();\n        return;\n      }\n\n      forEach(this.player.getElementsByTagName('img'), (image) => {\n        addListener(image, EVENT_LOAD, this.loadImage.bind(this), {\n          once: true,\n        });\n        dispatchEvent(image, EVENT_LOAD);\n      });\n    }\n  },\n\n  wheel(event) {\n    if (!this.viewed) {\n      return;\n    }\n\n    event.preventDefault();\n\n    // Limit wheel speed to prevent zoom too fast\n    if (this.wheeling) {\n      return;\n    }\n\n    this.wheeling = true;\n\n    setTimeout(() => {\n      this.wheeling = false;\n    }, 50);\n\n    const ratio = Number(this.options.zoomRatio) || 0.1;\n    let delta = 1;\n\n    if (event.deltaY) {\n      delta = event.deltaY > 0 ? 1 : -1;\n    } else if (event.wheelDelta) {\n      delta = -event.wheelDelta / 120;\n    } else if (event.detail) {\n      delta = event.detail > 0 ? 1 : -1;\n    }\n\n    this.zoom(-delta * ratio, true, event);\n  },\n};\n","import {\n  CLASS_ACTIVE,\n  CLASS_FADE,\n  CLASS_FIXED,\n  CLASS_FULLSCREEN_EXIT,\n  CLASS_HIDE,\n  CLASS_IN,\n  CLASS_INVISIBLE,\n  CLASS_LOADING,\n  CLASS_SHOW,\n  CLASS_TRANSITION,\n  EVENT_CLICK,\n  EVENT_HIDE,\n  EVENT_LOAD,\n  EVENT_SHOW,\n  EVENT_TRANSITION_END,\n  EVENT_VIEW,\n  EVENT_VIEWED,\n  EVENT_ZOOM,\n  EVENT_ZOOMED,\n  EVENT_PLAY,\n  EVENT_STOP,\n  NAMESPACE,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  dispatchEvent,\n  escapeHTMLEntities,\n  forEach,\n  getData,\n  getOffset,\n  getPointersCenter,\n  hasClass,\n  isFunction,\n  isNumber,\n  isUndefined,\n  removeClass,\n  removeListener,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nexport default {\n  /** Show the viewer (only available in modal mode)\n   * @param {boolean} [immediate=false] - Indicates if show the viewer immediately or not.\n   * @returns {Viewer} this\n   */\n  show(immediate = false) {\n    const { element, options } = this;\n\n    if (options.inline || this.showing || this.isShown || this.showing) {\n      return this;\n    }\n\n    if (!this.ready) {\n      this.build();\n\n      if (this.ready) {\n        this.show(immediate);\n      }\n\n      return this;\n    }\n\n    if (isFunction(options.show)) {\n      addListener(element, EVENT_SHOW, options.show, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_SHOW) === false || !this.ready) {\n      return this;\n    }\n\n    if (this.hiding) {\n      this.transitioning.abort();\n    }\n\n    this.showing = true;\n    this.open();\n\n    const { viewer } = this;\n\n    removeClass(viewer, CLASS_HIDE);\n\n    if (options.transition && !immediate) {\n      const shown = this.shown.bind(this);\n\n      this.transitioning = {\n        abort: () => {\n          removeListener(viewer, EVENT_TRANSITION_END, shown);\n          removeClass(viewer, CLASS_IN);\n        },\n      };\n\n      addClass(viewer, CLASS_TRANSITION);\n\n      // Force reflow to enable CSS3 transition\n      viewer.initialOffsetWidth = viewer.offsetWidth;\n      addListener(viewer, EVENT_TRANSITION_END, shown, {\n        once: true,\n      });\n      addClass(viewer, CLASS_IN);\n    } else {\n      addClass(viewer, CLASS_IN);\n      this.shown();\n    }\n\n    return this;\n  },\n\n  /**\n   * Hide the viewer (only available in modal mode)\n   * @param {boolean} [immediate=false] - Indicates if hide the viewer immediately or not.\n   * @returns {Viewer} this\n   */\n  hide(immediate = false) {\n    const { element, options } = this;\n\n    if (options.inline || this.hiding || !(this.isShown || this.showing)) {\n      return this;\n    }\n\n    if (isFunction(options.hide)) {\n      addListener(element, EVENT_HIDE, options.hide, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_HIDE) === false) {\n      return this;\n    }\n\n    if (this.showing) {\n      this.transitioning.abort();\n    }\n\n    this.hiding = true;\n\n    if (this.played) {\n      this.stop();\n    } else if (this.viewing) {\n      this.viewing.abort();\n    }\n\n    const { viewer, image } = this;\n    const hideImmediately = () => {\n      removeClass(viewer, CLASS_IN);\n      this.hidden();\n    };\n\n    if (options.transition && !immediate) {\n      const onViewerTransitionEnd = (event) => {\n        // Ignore all propagating `transitionend` events (#275).\n        if (event && event.target === viewer) {\n          removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n          this.hidden();\n        }\n      };\n      const onImageTransitionEnd = () => {\n        // In case of show the viewer by `viewer.show(true)` previously (#407).\n        if (hasClass(viewer, CLASS_TRANSITION)) {\n          addListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n          removeClass(viewer, CLASS_IN);\n        } else {\n          hideImmediately();\n        }\n      };\n\n      this.transitioning = {\n        abort: () => {\n          if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n            removeListener(image, EVENT_TRANSITION_END, onImageTransitionEnd);\n          } else if (hasClass(viewer, CLASS_TRANSITION)) {\n            removeListener(viewer, EVENT_TRANSITION_END, onViewerTransitionEnd);\n          }\n        },\n      };\n\n      // In case of hiding the viewer when holding on the image (#255),\n      // note that the `CLASS_TRANSITION` class will be removed on pointer down.\n      if (this.viewed && hasClass(image, CLASS_TRANSITION)) {\n        addListener(image, EVENT_TRANSITION_END, onImageTransitionEnd, {\n          once: true,\n        });\n        this.zoomTo(0, false, false, true);\n      } else {\n        onImageTransitionEnd();\n      }\n    } else {\n      hideImmediately();\n    }\n\n    return this;\n  },\n\n  /**\n   * View one of the images with image's index\n   * @param {number} index - The index of the image to view.\n   * @returns {Viewer} this\n   */\n  view(index = this.options.initialViewIndex) {\n    index = Number(index) || 0;\n\n    if (this.hiding || this.played || index < 0 || index >= this.length\n      || (this.viewed && index === this.index)) {\n      return this;\n    }\n\n    if (!this.isShown) {\n      this.index = index;\n      return this.show();\n    }\n\n    if (this.viewing) {\n      this.viewing.abort();\n    }\n\n    const {\n      element,\n      options,\n      title,\n      canvas,\n    } = this;\n    const item = this.items[index];\n    const img = item.querySelector('img');\n    const url = getData(img, 'originalUrl');\n    const alt = img.getAttribute('alt');\n    const image = document.createElement('img');\n\n    forEach(options.inheritedAttributes, (name) => {\n      const value = img.getAttribute(name);\n\n      if (value !== null) {\n        image.setAttribute(name, value);\n      }\n    });\n\n    image.src = url;\n    image.alt = alt;\n\n    if (isFunction(options.view)) {\n      addListener(element, EVENT_VIEW, options.view, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_VIEW, {\n      originalImage: this.images[index],\n      index,\n      image,\n    }) === false || !this.isShown || this.hiding || this.played) {\n      return this;\n    }\n\n    this.image = image;\n    removeClass(this.items[this.index], CLASS_ACTIVE);\n    addClass(item, CLASS_ACTIVE);\n    this.viewed = false;\n    this.index = index;\n    this.imageData = {};\n    addClass(image, CLASS_INVISIBLE);\n\n    if (options.loading) {\n      addClass(canvas, CLASS_LOADING);\n    }\n\n    canvas.innerHTML = '';\n    canvas.appendChild(image);\n\n    // Center current item\n    this.renderList();\n\n    // Clear title\n    title.innerHTML = '';\n\n    // Generate title after viewed\n    const onViewed = () => {\n      const { imageData } = this;\n      const render = Array.isArray(options.title) ? options.title[1] : options.title;\n\n      title.innerHTML = escapeHTMLEntities(isFunction(render)\n        ? render.call(this, image, imageData)\n        : `${alt} (${imageData.naturalWidth} × ${imageData.naturalHeight})`);\n    };\n    let onLoad;\n\n    addListener(element, EVENT_VIEWED, onViewed, {\n      once: true,\n    });\n\n    this.viewing = {\n      abort: () => {\n        removeListener(element, EVENT_VIEWED, onViewed);\n\n        if (image.complete) {\n          if (this.imageRendering) {\n            this.imageRendering.abort();\n          } else if (this.imageInitializing) {\n            this.imageInitializing.abort();\n          }\n        } else {\n          // Cancel download to save bandwidth.\n          image.src = '';\n          removeListener(image, EVENT_LOAD, onLoad);\n\n          if (this.timeout) {\n            clearTimeout(this.timeout);\n          }\n        }\n      },\n    };\n\n    if (image.complete) {\n      this.load();\n    } else {\n      addListener(image, EVENT_LOAD, onLoad = this.load.bind(this), {\n        once: true,\n      });\n\n      if (this.timeout) {\n        clearTimeout(this.timeout);\n      }\n\n      // Make the image visible if it fails to load within 1s\n      this.timeout = setTimeout(() => {\n        removeClass(image, CLASS_INVISIBLE);\n        this.timeout = false;\n      }, 1000);\n    }\n\n    return this;\n  },\n\n  /**\n   * View the previous image\n   * @param {boolean} [loop=false] - Indicate if view the last one\n   * when it is the first one at present.\n   * @returns {Viewer} this\n   */\n  prev(loop = false) {\n    let index = this.index - 1;\n\n    if (index < 0) {\n      index = loop ? this.length - 1 : 0;\n    }\n\n    this.view(index);\n    return this;\n  },\n\n  /**\n   * View the next image\n   * @param {boolean} [loop=false] - Indicate if view the first one\n   * when it is the last one at present.\n   * @returns {Viewer} this\n   */\n  next(loop = false) {\n    const maxIndex = this.length - 1;\n    let index = this.index + 1;\n\n    if (index > maxIndex) {\n      index = loop ? 0 : maxIndex;\n    }\n\n    this.view(index);\n    return this;\n  },\n\n  /**\n   * Move the image with relative offsets.\n   * @param {number} offsetX - The relative offset distance on the x-axis.\n   * @param {number} offsetY - The relative offset distance on the y-axis.\n   * @returns {Viewer} this\n   */\n  move(offsetX, offsetY) {\n    const { imageData } = this;\n\n    this.moveTo(\n      isUndefined(offsetX) ? offsetX : imageData.left + Number(offsetX),\n      isUndefined(offsetY) ? offsetY : imageData.top + Number(offsetY),\n    );\n\n    return this;\n  },\n\n  /**\n   * Move the image to an absolute point.\n   * @param {number} x - The x-axis coordinate.\n   * @param {number} [y=x] - The y-axis coordinate.\n   * @returns {Viewer} this\n   */\n  moveTo(x, y = x) {\n    const { imageData } = this;\n\n    x = Number(x);\n    y = Number(y);\n\n    if (this.viewed && !this.played && this.options.movable) {\n      let changed = false;\n\n      if (isNumber(x)) {\n        imageData.left = x;\n        changed = true;\n      }\n\n      if (isNumber(y)) {\n        imageData.top = y;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Zoom the image with a relative ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @returns {Viewer} this\n   */\n  zoom(ratio, hasTooltip = false, _originalEvent = null) {\n    const { imageData } = this;\n\n    ratio = Number(ratio);\n\n    if (ratio < 0) {\n      ratio = 1 / (1 - ratio);\n    } else {\n      ratio = 1 + ratio;\n    }\n\n    this.zoomTo((imageData.width * ratio) / imageData.naturalWidth, hasTooltip, _originalEvent);\n\n    return this;\n  },\n\n  /**\n   * Zoom the image to an absolute ratio.\n   * @param {number} ratio - The target ratio.\n   * @param {boolean} [hasTooltip=false] - Indicates if it has a tooltip or not.\n   * @param {Event} [_originalEvent=null] - The original event if any.\n   * @param {Event} [_zoomable=false] - Indicates if the current zoom is available or not.\n   * @returns {Viewer} this\n   */\n  zoomTo(ratio, hasTooltip = false, _originalEvent = null, _zoomable = false) {\n    const {\n      element,\n      options,\n      pointers,\n      imageData,\n    } = this;\n    const {\n      width,\n      height,\n      left,\n      top,\n      naturalWidth,\n      naturalHeight,\n    } = imageData;\n\n    ratio = Math.max(0, ratio);\n\n    if (isNumber(ratio) && this.viewed && !this.played && (_zoomable || options.zoomable)) {\n      if (!_zoomable) {\n        const minZoomRatio = Math.max(0.01, options.minZoomRatio);\n        const maxZoomRatio = Math.min(100, options.maxZoomRatio);\n\n        ratio = Math.min(Math.max(ratio, minZoomRatio), maxZoomRatio);\n      }\n\n      if (_originalEvent && options.zoomRatio >= 0.055 && ratio > 0.95 && ratio < 1.05) {\n        ratio = 1;\n      }\n\n      const newWidth = naturalWidth * ratio;\n      const newHeight = naturalHeight * ratio;\n      const offsetWidth = newWidth - width;\n      const offsetHeight = newHeight - height;\n      const oldRatio = width / naturalWidth;\n\n      if (isFunction(options.zoom)) {\n        addListener(element, EVENT_ZOOM, options.zoom, {\n          once: true,\n        });\n      }\n\n      if (dispatchEvent(element, EVENT_ZOOM, {\n        ratio,\n        oldRatio,\n        originalEvent: _originalEvent,\n      }) === false) {\n        return this;\n      }\n\n      this.zooming = true;\n\n      if (_originalEvent) {\n        const offset = getOffset(this.viewer);\n        const center = pointers && Object.keys(pointers).length ? getPointersCenter(pointers) : {\n          pageX: _originalEvent.pageX,\n          pageY: _originalEvent.pageY,\n        };\n\n        // Zoom from the triggering point of the event\n        imageData.left -= offsetWidth * (((center.pageX - offset.left) - left) / width);\n        imageData.top -= offsetHeight * (((center.pageY - offset.top) - top) / height);\n      } else {\n        // Zoom from the center of the image\n        imageData.left -= offsetWidth / 2;\n        imageData.top -= offsetHeight / 2;\n      }\n\n      imageData.width = newWidth;\n      imageData.height = newHeight;\n      imageData.ratio = ratio;\n      this.renderImage(() => {\n        this.zooming = false;\n\n        if (isFunction(options.zoomed)) {\n          addListener(element, EVENT_ZOOMED, options.zoomed, {\n            once: true,\n          });\n        }\n\n        dispatchEvent(element, EVENT_ZOOMED, {\n          ratio,\n          oldRatio,\n          originalEvent: _originalEvent,\n        }, {\n          cancelable: false,\n        });\n      });\n\n      if (hasTooltip) {\n        this.tooltip();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Rotate the image with a relative degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Viewer} this\n   */\n  rotate(degree) {\n    this.rotateTo((this.imageData.rotate || 0) + Number(degree));\n\n    return this;\n  },\n\n  /**\n   * Rotate the image to an absolute degree.\n   * @param {number} degree - The rotate degree.\n   * @returns {Viewer} this\n   */\n  rotateTo(degree) {\n    const { imageData } = this;\n\n    degree = Number(degree);\n\n    if (isNumber(degree) && this.viewed && !this.played && this.options.rotatable) {\n      imageData.rotate = degree;\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the x-axis.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @returns {Viewer} this\n   */\n  scaleX(scaleX) {\n    this.scale(scaleX, this.imageData.scaleY);\n\n    return this;\n  },\n\n  /**\n   * Scale the image on the y-axis.\n   * @param {number} scaleY - The scale ratio on the y-axis.\n   * @returns {Viewer} this\n   */\n  scaleY(scaleY) {\n    this.scale(this.imageData.scaleX, scaleY);\n\n    return this;\n  },\n\n  /**\n   * Scale the image.\n   * @param {number} scaleX - The scale ratio on the x-axis.\n   * @param {number} [scaleY=scaleX] - The scale ratio on the y-axis.\n   * @returns {Viewer} this\n   */\n  scale(scaleX, scaleY = scaleX) {\n    const { imageData } = this;\n\n    scaleX = Number(scaleX);\n    scaleY = Number(scaleY);\n\n    if (this.viewed && !this.played && this.options.scalable) {\n      let changed = false;\n\n      if (isNumber(scaleX)) {\n        imageData.scaleX = scaleX;\n        changed = true;\n      }\n\n      if (isNumber(scaleY)) {\n        imageData.scaleY = scaleY;\n        changed = true;\n      }\n\n      if (changed) {\n        this.renderImage();\n      }\n    }\n\n    return this;\n  },\n\n  /**\n   * Play the images\n   * @param {boolean} [fullscreen=false] - Indicate if request fullscreen or not.\n   * @returns {Viewer} this\n   */\n  play(fullscreen = false) {\n    if (!this.isShown || this.played) {\n      return this;\n    }\n\n    const { element, options } = this;\n\n    if (isFunction(options.play)) {\n      addListener(element, EVENT_PLAY, options.play, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_PLAY) === false) {\n      return this;\n    }\n\n    const { player } = this;\n    const onLoad = this.loadImage.bind(this);\n    const list = [];\n    let total = 0;\n    let index = 0;\n\n    this.played = true;\n    this.onLoadWhenPlay = onLoad;\n\n    if (fullscreen) {\n      this.requestFullscreen();\n    }\n\n    addClass(player, CLASS_SHOW);\n    forEach(this.items, (item, i) => {\n      const img = item.querySelector('img');\n      const image = document.createElement('img');\n\n      image.src = getData(img, 'originalUrl');\n      image.alt = img.getAttribute('alt');\n      image.referrerPolicy = img.referrerPolicy;\n      total += 1;\n      addClass(image, CLASS_FADE);\n      toggleClass(image, CLASS_TRANSITION, options.transition);\n\n      if (hasClass(item, CLASS_ACTIVE)) {\n        addClass(image, CLASS_IN);\n        index = i;\n      }\n\n      list.push(image);\n      addListener(image, EVENT_LOAD, onLoad, {\n        once: true,\n      });\n      player.appendChild(image);\n    });\n\n    if (isNumber(options.interval) && options.interval > 0) {\n      const play = () => {\n        this.playing = setTimeout(() => {\n          removeClass(list[index], CLASS_IN);\n          index += 1;\n          index = index < total ? index : 0;\n          addClass(list[index], CLASS_IN);\n          play();\n        }, options.interval);\n      };\n\n      if (total > 1) {\n        play();\n      }\n    }\n\n    return this;\n  },\n\n  // Stop play\n  stop() {\n    if (!this.played) {\n      return this;\n    }\n\n    const { element, options } = this;\n\n    if (isFunction(options.stop)) {\n      addListener(element, EVENT_STOP, options.stop, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_STOP) === false) {\n      return this;\n    }\n\n    const { player } = this;\n\n    this.played = false;\n    clearTimeout(this.playing);\n    forEach(player.getElementsByTagName('img'), (image) => {\n      removeListener(image, EVENT_LOAD, this.onLoadWhenPlay);\n    });\n    removeClass(player, CLASS_SHOW);\n    player.innerHTML = '';\n    this.exitFullscreen();\n\n    return this;\n  },\n\n  // Enter modal mode (only available in inline mode)\n  full() {\n    const {\n      options,\n      viewer,\n      image,\n      list,\n    } = this;\n\n    if (!this.isShown || this.played || this.fulled || !options.inline) {\n      return this;\n    }\n\n    this.fulled = true;\n    this.open();\n    addClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(list, CLASS_TRANSITION);\n\n      if (this.viewed) {\n        removeClass(image, CLASS_TRANSITION);\n      }\n    }\n\n    addClass(viewer, CLASS_FIXED);\n    viewer.setAttribute('style', '');\n    setStyle(viewer, {\n      zIndex: options.zIndex,\n    });\n\n    this.initContainer();\n    this.viewerData = assign({}, this.containerData);\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage(() => {\n          if (options.transition) {\n            setTimeout(() => {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n    }\n\n    return this;\n  },\n\n  // Exit modal mode (only available in inline mode)\n  exit() {\n    const {\n      options,\n      viewer,\n      image,\n      list,\n    } = this;\n\n    if (!this.isShown || this.played || !this.fulled || !options.inline) {\n      return this;\n    }\n\n    this.fulled = false;\n    this.close();\n    removeClass(this.button, CLASS_FULLSCREEN_EXIT);\n\n    if (options.transition) {\n      removeClass(list, CLASS_TRANSITION);\n\n      if (this.viewed) {\n        removeClass(image, CLASS_TRANSITION);\n      }\n    }\n\n    removeClass(viewer, CLASS_FIXED);\n    setStyle(viewer, {\n      zIndex: options.zIndexInline,\n    });\n\n    this.viewerData = assign({}, this.parentData);\n    this.renderViewer();\n    this.renderList();\n\n    if (this.viewed) {\n      this.initImage(() => {\n        this.renderImage(() => {\n          if (options.transition) {\n            setTimeout(() => {\n              addClass(image, CLASS_TRANSITION);\n              addClass(list, CLASS_TRANSITION);\n            }, 0);\n          }\n        });\n      });\n    }\n\n    return this;\n  },\n\n  // Show the current ratio of the image with percentage\n  tooltip() {\n    const { options, tooltipBox, imageData } = this;\n\n    if (!this.viewed || this.played || !options.tooltip) {\n      return this;\n    }\n\n    tooltipBox.textContent = `${Math.round(imageData.ratio * 100)}%`;\n\n    if (!this.tooltipping) {\n      if (options.transition) {\n        if (this.fading) {\n          dispatchEvent(tooltipBox, EVENT_TRANSITION_END);\n        }\n\n        addClass(tooltipBox, CLASS_SHOW);\n        addClass(tooltipBox, CLASS_FADE);\n        addClass(tooltipBox, CLASS_TRANSITION);\n\n        // Force reflow to enable CSS3 transition\n        tooltipBox.initialOffsetWidth = tooltipBox.offsetWidth;\n        addClass(tooltipBox, CLASS_IN);\n      } else {\n        addClass(tooltipBox, CLASS_SHOW);\n      }\n    } else {\n      clearTimeout(this.tooltipping);\n    }\n\n    this.tooltipping = setTimeout(() => {\n      if (options.transition) {\n        addListener(tooltipBox, EVENT_TRANSITION_END, () => {\n          removeClass(tooltipBox, CLASS_SHOW);\n          removeClass(tooltipBox, CLASS_FADE);\n          removeClass(tooltipBox, CLASS_TRANSITION);\n          this.fading = false;\n        }, {\n          once: true,\n        });\n\n        removeClass(tooltipBox, CLASS_IN);\n        this.fading = true;\n      } else {\n        removeClass(tooltipBox, CLASS_SHOW);\n      }\n\n      this.tooltipping = false;\n    }, 1000);\n\n    return this;\n  },\n\n  // Toggle the image size between its natural size and initial size\n  toggle() {\n    if (this.imageData.ratio === 1) {\n      this.zoomTo(this.initialImageData.ratio, true);\n    } else {\n      this.zoomTo(1, true);\n    }\n\n    return this;\n  },\n\n  // Reset the image to its initial state\n  reset() {\n    if (this.viewed && !this.played) {\n      this.imageData = assign({}, this.initialImageData);\n      this.renderImage();\n    }\n\n    return this;\n  },\n\n  // Update viewer when images changed\n  update() {\n    const { element, options, isImg } = this;\n\n    // Destroy viewer if the target image was deleted\n    if (isImg && !element.parentNode) {\n      return this.destroy();\n    }\n\n    const images = [];\n\n    forEach(isImg ? [element] : element.querySelectorAll('img'), (image) => {\n      if (isFunction(options.filter)) {\n        if (options.filter.call(this, image)) {\n          images.push(image);\n        }\n      } else if (this.getImageURL(image)) {\n        images.push(image);\n      }\n    });\n\n    if (!images.length) {\n      return this;\n    }\n\n    this.images = images;\n    this.length = images.length;\n\n    if (this.ready) {\n      const changedIndexes = [];\n\n      forEach(this.items, (item, i) => {\n        const img = item.querySelector('img');\n        const image = images[i];\n\n        if (image && img) {\n          if (\n            image.src !== img.src\n\n            // Title changed (#408)\n            || image.alt !== img.alt\n          ) {\n            changedIndexes.push(i);\n          }\n        } else {\n          changedIndexes.push(i);\n        }\n      });\n\n      setStyle(this.list, {\n        width: 'auto',\n      });\n\n      this.initList();\n\n      if (this.isShown) {\n        if (this.length) {\n          if (this.viewed) {\n            const changedIndex = changedIndexes.indexOf(this.index);\n\n            if (changedIndex >= 0) {\n              this.viewed = false;\n              this.view(Math.max(Math.min(this.index - changedIndex, this.length - 1), 0));\n            } else {\n              // Reactivate the current viewing item after reset the list.\n              addClass(this.items[this.index], CLASS_ACTIVE);\n            }\n          }\n        } else {\n          this.image = null;\n          this.viewed = false;\n          this.index = 0;\n          this.imageData = {};\n          this.canvas.innerHTML = '';\n          this.title.innerHTML = '';\n        }\n      }\n    } else {\n      this.build();\n    }\n\n    return this;\n  },\n\n  // Destroy the viewer\n  destroy() {\n    const { element, options } = this;\n\n    if (!element[NAMESPACE]) {\n      return this;\n    }\n\n    this.destroyed = true;\n\n    if (this.ready) {\n      if (this.played) {\n        this.stop();\n      }\n\n      if (options.inline) {\n        if (this.fulled) {\n          this.exit();\n        }\n\n        this.unbind();\n      } else if (this.isShown) {\n        if (this.viewing) {\n          if (this.imageRendering) {\n            this.imageRendering.abort();\n          } else if (this.imageInitializing) {\n            this.imageInitializing.abort();\n          }\n        }\n\n        if (this.hiding) {\n          this.transitioning.abort();\n        }\n\n        this.hidden();\n      } else if (this.showing) {\n        this.transitioning.abort();\n        this.hidden();\n      }\n\n      this.ready = false;\n      this.viewer.parentNode.removeChild(this.viewer);\n    } else if (options.inline) {\n      if (this.delaying) {\n        this.delaying.abort();\n      } else if (this.initializing) {\n        this.initializing.abort();\n      }\n    }\n\n    if (!options.inline) {\n      removeListener(element, EVENT_CLICK, this.onStart);\n    }\n\n    element[NAMESPACE] = undefined;\n    return this;\n  },\n};\n","import {\n  ACTION_MOVE,\n  ACTION_SWITCH,\n  ACTION_ZOOM,\n  CLASS_HIDE,\n  CLASS_OPEN,\n  EVENT_HIDDEN,\n  EVENT_SHOWN,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  dispatchEvent,\n  forEach,\n  getMaxZoomRatio,\n  isFunction,\n  isString,\n  removeClass,\n} from './utilities';\n\nexport default {\n  getImageURL(image) {\n    let { url } = this.options;\n\n    if (isString(url)) {\n      url = image.getAttribute(url);\n    } else if (isFunction(url)) {\n      url = url.call(this, image);\n    } else {\n      url = '';\n    }\n\n    return url;\n  },\n\n  open() {\n    const { body } = this;\n\n    addClass(body, CLASS_OPEN);\n\n    body.style.paddingRight = `${this.scrollbarWidth + (parseFloat(this.initialBodyComputedPaddingRight) || 0)}px`;\n  },\n\n  close() {\n    const { body } = this;\n\n    removeClass(body, CLASS_OPEN);\n    body.style.paddingRight = this.initialBodyPaddingRight;\n  },\n\n  shown() {\n    const { element, options } = this;\n\n    this.fulled = true;\n    this.isShown = true;\n    this.render();\n    this.bind();\n    this.showing = false;\n\n    if (isFunction(options.shown)) {\n      addListener(element, EVENT_SHOWN, options.shown, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_SHOWN) === false) {\n      return;\n    }\n\n    if (this.ready && this.isShown && !this.hiding) {\n      this.view(this.index);\n    }\n  },\n\n  hidden() {\n    const { element, options } = this;\n\n    this.fulled = false;\n    this.viewed = false;\n    this.isShown = false;\n    this.close();\n    this.unbind();\n    addClass(this.viewer, CLASS_HIDE);\n    this.resetList();\n    this.resetImage();\n    this.hiding = false;\n\n    if (!this.destroyed) {\n      if (isFunction(options.hidden)) {\n        addListener(element, EVENT_HIDDEN, options.hidden, {\n          once: true,\n        });\n      }\n\n      dispatchEvent(element, EVENT_HIDDEN, null, {\n        cancelable: false,\n      });\n    }\n  },\n\n  requestFullscreen() {\n    const document = this.element.ownerDocument;\n\n    if (this.fulled && !(\n      document.fullscreenElement\n      || document.webkitFullscreenElement\n      || document.mozFullScreenElement\n      || document.msFullscreenElement\n    )) {\n      const { documentElement } = document;\n\n      // Element.requestFullscreen()\n      if (documentElement.requestFullscreen) {\n        documentElement.requestFullscreen();\n      } else if (documentElement.webkitRequestFullscreen) {\n        documentElement.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT);\n      } else if (documentElement.mozRequestFullScreen) {\n        documentElement.mozRequestFullScreen();\n      } else if (documentElement.msRequestFullscreen) {\n        documentElement.msRequestFullscreen();\n      }\n    }\n  },\n\n  exitFullscreen() {\n    const document = this.element.ownerDocument;\n\n    if (this.fulled && (\n      document.fullscreenElement\n      || document.webkitFullscreenElement\n      || document.mozFullScreenElement\n      || document.msFullscreenElement\n    )) {\n      // Document.exitFullscreen()\n      if (document.exitFullscreen) {\n        document.exitFullscreen();\n      } else if (document.webkitExitFullscreen) {\n        document.webkitExitFullscreen();\n      } else if (document.mozCancelFullScreen) {\n        document.mozCancelFullScreen();\n      } else if (document.msExitFullscreen) {\n        document.msExitFullscreen();\n      }\n    }\n  },\n\n  change(event) {\n    const { options, pointers } = this;\n    const pointer = pointers[Object.keys(pointers)[0]];\n    const offsetX = pointer.endX - pointer.startX;\n    const offsetY = pointer.endY - pointer.startY;\n\n    switch (this.action) {\n      // Move the current image\n      case ACTION_MOVE:\n        this.move(offsetX, offsetY);\n        break;\n\n      // Zoom the current image\n      case ACTION_ZOOM:\n        this.zoom(getMaxZoomRatio(pointers), false, event);\n        break;\n\n      case ACTION_SWITCH: {\n        this.action = 'switched';\n\n        const absoluteOffsetX = Math.abs(offsetX);\n\n        if (absoluteOffsetX > 1 && absoluteOffsetX > Math.abs(offsetY)) {\n          // Empty `pointers` as `touchend` event will not be fired after swiped in iOS browsers.\n          this.pointers = {};\n\n          if (offsetX > 1) {\n            this.prev(options.loop);\n          } else if (offsetX < -1) {\n            this.next(options.loop);\n          }\n        }\n\n        break;\n      }\n\n      default:\n    }\n\n    // Override\n    forEach(pointers, (p) => {\n      p.startX = p.endX;\n      p.startY = p.endY;\n    });\n  },\n\n  isSwitchable() {\n    const { imageData, viewerData } = this;\n\n    return this.length > 1 && imageData.left >= 0 && imageData.top >= 0\n      && imageData.width <= viewerData.width\n      && imageData.height <= viewerData.height;\n  },\n};\n","import DEFAULTS from './defaults';\nimport TEMPLATE from './template';\nimport render from './render';\nimport events from './events';\nimport handlers from './handlers';\nimport methods from './methods';\nimport others from './others';\nimport {\n  BUTTONS,\n  CLASS_CLOSE,\n  CLASS_FADE,\n  CLASS_FIXED,\n  CLASS_FULLSCREEN,\n  CLASS_HIDE,\n  CLASS_INVISIBLE,\n  DATA_ACTION,\n  EVENT_CLICK,\n  EVENT_LOAD,\n  EVENT_READY,\n  NAMESPACE,\n  REGEXP_SPACES,\n  WINDOW,\n} from './constants';\nimport {\n  addClass,\n  addListener,\n  assign,\n  dispatchEvent,\n  forEach,\n  getResponsiveClass,\n  hyphenate,\n  isFunction,\n  isNumber,\n  isPlainObject,\n  isString,\n  isUndefined,\n  removeListener,\n  setData,\n  setStyle,\n  toggleClass,\n} from './utilities';\n\nconst AnotherViewer = WINDOW.Viewer;\n\nclass Viewer {\n  /**\n   * Create a new Viewer.\n   * @param {Element} element - The target element for viewing.\n   * @param {Object} [options={}] - The configuration options.\n   */\n  constructor(element, options = {}) {\n    if (!element || element.nodeType !== 1) {\n      throw new Error('The first argument is required and must be an element.');\n    }\n\n    this.element = element;\n    this.options = assign({}, DEFAULTS, isPlainObject(options) && options);\n    this.action = false;\n    this.fading = false;\n    this.fulled = false;\n    this.hiding = false;\n    this.imageClicked = false;\n    this.imageData = {};\n    this.index = this.options.initialViewIndex;\n    this.isImg = false;\n    this.isShown = false;\n    this.length = 0;\n    this.played = false;\n    this.playing = false;\n    this.pointers = {};\n    this.ready = false;\n    this.showing = false;\n    this.timeout = false;\n    this.tooltipping = false;\n    this.viewed = false;\n    this.viewing = false;\n    this.wheeling = false;\n    this.zooming = false;\n    this.init();\n  }\n\n  init() {\n    const { element, options } = this;\n\n    if (element[NAMESPACE]) {\n      return;\n    }\n\n    element[NAMESPACE] = this;\n\n    const isImg = element.tagName.toLowerCase() === 'img';\n    const images = [];\n\n    forEach(isImg ? [element] : element.querySelectorAll('img'), (image) => {\n      if (isFunction(options.filter)) {\n        if (options.filter.call(this, image)) {\n          images.push(image);\n        }\n      } else if (this.getImageURL(image)) {\n        images.push(image);\n      }\n    });\n\n    this.isImg = isImg;\n    this.length = images.length;\n    this.images = images;\n    this.initBody();\n\n    // Override `transition` option if it is not supported\n    if (isUndefined(document.createElement(NAMESPACE).style.transition)) {\n      options.transition = false;\n    }\n\n    if (options.inline) {\n      let count = 0;\n      const progress = () => {\n        count += 1;\n\n        if (count === this.length) {\n          let timeout;\n\n          this.initializing = false;\n          this.delaying = {\n            abort: () => {\n              clearTimeout(timeout);\n            },\n          };\n\n          // build asynchronously to keep `this.viewer` is accessible in `ready` event handler.\n          timeout = setTimeout(() => {\n            this.delaying = false;\n            this.build();\n          }, 0);\n        }\n      };\n\n      this.initializing = {\n        abort: () => {\n          forEach(images, (image) => {\n            if (!image.complete) {\n              removeListener(image, EVENT_LOAD, progress);\n            }\n          });\n        },\n      };\n\n      forEach(images, (image) => {\n        if (image.complete) {\n          progress();\n        } else {\n          addListener(image, EVENT_LOAD, progress, {\n            once: true,\n          });\n        }\n      });\n    } else {\n      addListener(element, EVENT_CLICK, (this.onStart = ({ target }) => {\n        if (target.tagName.toLowerCase() === 'img'\n          && (!isFunction(options.filter) || options.filter.call(this, target))) {\n          this.view(this.images.indexOf(target));\n        }\n      }));\n    }\n  }\n\n  build() {\n    if (this.ready) {\n      return;\n    }\n\n    const { element, options } = this;\n    const parent = element.parentNode;\n    const template = document.createElement('div');\n\n    template.innerHTML = TEMPLATE;\n\n    const viewer = template.querySelector(`.${NAMESPACE}-container`);\n    const title = viewer.querySelector(`.${NAMESPACE}-title`);\n    const toolbar = viewer.querySelector(`.${NAMESPACE}-toolbar`);\n    const navbar = viewer.querySelector(`.${NAMESPACE}-navbar`);\n    const button = viewer.querySelector(`.${NAMESPACE}-button`);\n    const canvas = viewer.querySelector(`.${NAMESPACE}-canvas`);\n\n    this.parent = parent;\n    this.viewer = viewer;\n    this.title = title;\n    this.toolbar = toolbar;\n    this.navbar = navbar;\n    this.button = button;\n    this.canvas = canvas;\n    this.footer = viewer.querySelector(`.${NAMESPACE}-footer`);\n    this.tooltipBox = viewer.querySelector(`.${NAMESPACE}-tooltip`);\n    this.player = viewer.querySelector(`.${NAMESPACE}-player`);\n    this.list = viewer.querySelector(`.${NAMESPACE}-list`);\n\n    addClass(title, !options.title ? CLASS_HIDE : getResponsiveClass(Array.isArray(options.title)\n      ? options.title[0]\n      : options.title));\n    addClass(navbar, !options.navbar ? CLASS_HIDE : getResponsiveClass(options.navbar));\n    toggleClass(button, CLASS_HIDE, !options.button);\n\n    if (options.backdrop) {\n      addClass(viewer, `${NAMESPACE}-backdrop`);\n\n      if (!options.inline && options.backdrop !== 'static') {\n        setData(canvas, DATA_ACTION, 'hide');\n      }\n    }\n\n    if (isString(options.className) && options.className) {\n      // In case there are multiple class names\n      options.className.split(REGEXP_SPACES).forEach((className) => {\n        addClass(viewer, className);\n      });\n    }\n\n    if (options.toolbar) {\n      const list = document.createElement('ul');\n      const custom = isPlainObject(options.toolbar);\n      const zoomButtons = BUTTONS.slice(0, 3);\n      const rotateButtons = BUTTONS.slice(7, 9);\n      const scaleButtons = BUTTONS.slice(9);\n\n      if (!custom) {\n        addClass(toolbar, getResponsiveClass(options.toolbar));\n      }\n\n      forEach(custom ? options.toolbar : BUTTONS, (value, index) => {\n        const deep = custom && isPlainObject(value);\n        const name = custom ? hyphenate(index) : value;\n        const show = deep && !isUndefined(value.show) ? value.show : value;\n\n        if (\n          !show\n          || (!options.zoomable && zoomButtons.indexOf(name) !== -1)\n          || (!options.rotatable && rotateButtons.indexOf(name) !== -1)\n          || (!options.scalable && scaleButtons.indexOf(name) !== -1)\n        ) {\n          return;\n        }\n\n        const size = deep && !isUndefined(value.size) ? value.size : value;\n        const click = deep && !isUndefined(value.click) ? value.click : value;\n        const item = document.createElement('li');\n\n        item.setAttribute('role', 'button');\n        addClass(item, `${NAMESPACE}-${name}`);\n\n        if (!isFunction(click)) {\n          setData(item, DATA_ACTION, name);\n        }\n\n        if (isNumber(show)) {\n          addClass(item, getResponsiveClass(show));\n        }\n\n        if (['small', 'large'].indexOf(size) !== -1) {\n          addClass(item, `${NAMESPACE}-${size}`);\n        } else if (name === 'play') {\n          addClass(item, `${NAMESPACE}-large`);\n        }\n\n        if (isFunction(click)) {\n          addListener(item, EVENT_CLICK, click);\n        }\n\n        list.appendChild(item);\n      });\n\n      toolbar.appendChild(list);\n    } else {\n      addClass(toolbar, CLASS_HIDE);\n    }\n\n    if (!options.rotatable) {\n      const rotates = toolbar.querySelectorAll('li[class*=\"rotate\"]');\n\n      addClass(rotates, CLASS_INVISIBLE);\n      forEach(rotates, (rotate) => {\n        toolbar.appendChild(rotate);\n      });\n    }\n\n    if (options.inline) {\n      addClass(button, CLASS_FULLSCREEN);\n      setStyle(viewer, {\n        zIndex: options.zIndexInline,\n      });\n\n      if (window.getComputedStyle(parent).position === 'static') {\n        setStyle(parent, {\n          position: 'relative',\n        });\n      }\n\n      parent.insertBefore(viewer, element.nextSibling);\n    } else {\n      addClass(button, CLASS_CLOSE);\n      addClass(viewer, CLASS_FIXED);\n      addClass(viewer, CLASS_FADE);\n      addClass(viewer, CLASS_HIDE);\n\n      setStyle(viewer, {\n        zIndex: options.zIndex,\n      });\n\n      let { container } = options;\n\n      if (isString(container)) {\n        container = element.ownerDocument.querySelector(container);\n      }\n\n      if (!container) {\n        container = this.body;\n      }\n\n      container.appendChild(viewer);\n    }\n\n    if (options.inline) {\n      this.render();\n      this.bind();\n      this.isShown = true;\n    }\n\n    this.ready = true;\n\n    if (isFunction(options.ready)) {\n      addListener(element, EVENT_READY, options.ready, {\n        once: true,\n      });\n    }\n\n    if (dispatchEvent(element, EVENT_READY) === false) {\n      this.ready = false;\n      return;\n    }\n\n    if (this.ready && options.inline) {\n      this.view(this.index);\n    }\n  }\n\n  /**\n   * Get the no conflict viewer class.\n   * @returns {Viewer} The viewer class.\n   */\n  static noConflict() {\n    window.Viewer = AnotherViewer;\n    return Viewer;\n  }\n\n  /**\n   * Change the default options.\n   * @param {Object} options - The new default options.\n   */\n  static setDefaults(options) {\n    assign(DEFAULTS, isPlainObject(options) && options);\n  }\n}\n\nassign(Viewer.prototype, render, events, handlers, methods, others);\n\nexport default Viewer;\n"],"names":["backdrop","button","navbar","title","toolbar","className","container","filter","fullscreen","inheritedAttributes","initialViewIndex","inline","interval","keyboard","loading","loop","minWidth","minHeight","movable","rotatable","scalable","zoomable","zoomOnTouch","zoomOnWheel","slideOnTouch","toggleOnDblclick","tooltip","transition","zIndex","zIndexInline","zoomRatio","minZoomRatio","maxZoomRatio","url","ready","show","shown","hide","hidden","view","viewed","zoom","zoomed","play","stop","IS_BROWSER","window","document","WINDOW","IS_TOUCH_DEVICE","documentElement","HAS_POINTER_EVENT","NAMESPACE","ACTION_MOVE","ACTION_SWITCH","ACTION_ZOOM","CLASS_ACTIVE","CLASS_CLOSE","CLASS_FADE","CLASS_FIXED","CLASS_FULLSCREEN","CLASS_FULLSCREEN_EXIT","CLASS_HIDE","CLASS_HIDE_MD_DOWN","CLASS_HIDE_SM_DOWN","CLASS_HIDE_XS_DOWN","CLASS_IN","CLASS_INVISIBLE","CLASS_LOADING","CLASS_MOVE","CLASS_OPEN","CLASS_SHOW","CLASS_TRANSITION","EVENT_CLICK","EVENT_DBLCLICK","EVENT_DRAG_START","EVENT_HIDDEN","EVENT_HIDE","EVENT_KEY_DOWN","EVENT_LOAD","EVENT_TOUCH_START","EVENT_TOUCH_MOVE","EVENT_TOUCH_END","EVENT_POINTER_DOWN","EVENT_POINTER_MOVE","EVENT_POINTER_UP","EVENT_READY","EVENT_RESIZE","EVENT_SHOW","EVENT_SHOWN","EVENT_TRANSITION_END","EVENT_VIEW","EVENT_VIEWED","EVENT_WHEEL","EVENT_ZOOM","EVENT_ZOOMED","EVENT_PLAY","EVENT_STOP","DATA_ACTION","REGEXP_SPACES","BUTTONS","isString","value","isNaN","Number","isNumber","isUndefined","isObject","hasOwnProperty","Object","prototype","isPlainObject","constructor","call","error","isFunction","forEach","data","callback","Array","isArray","length","i","keys","key","assign","obj","args","arg","REGEXP_SUFFIX","setStyle","element","styles","style","property","test","escapeHTMLEntities","replace","hasClass","classList","contains","indexOf","addClass","elem","add","trim","removeClass","remove","toggleClass","added","REGEXP_HYPHENATE","hyphenate","toLowerCase","getData","name","dataset","getAttribute","setData","setAttribute","onceSupported","supported","once","listener","options","defineProperty","get","set","addEventListener","removeEventListener","removeListener","type","handler","split","event","listeners","addListener","apply","dispatchEvent","Event","CustomEvent","bubbles","cancelable","detail","createEvent","initCustomEvent","getOffset","box","getBoundingClientRect","left","pageXOffset","clientLeft","top","pageYOffset","clientTop","getTransforms","rotate","scaleX","scaleY","translateX","translateY","values","push","transform","join","WebkitTransform","msTransform","getImageNameFromURL","decodeURIComponent","IS_SAFARI","navigator","userAgent","getImageNaturalSizes","image","newImage","createElement","naturalWidth","naturalHeight","body","onload","width","height","removeChild","src","cssText","appendChild","getResponsiveClass","getMaxZoomRatio","pointers","pointers2","ratios","pointer","pointerId","pointer2","x1","Math","abs","startX","y1","startY","x2","endX","y2","endY","z1","sqrt","z2","ratio","sort","a","b","getPointer","pageX","pageY","endOnly","end","timeStamp","Date","now","getPointersCenter","count","render","initContainer","initViewer","initList","renderViewer","initBody","ownerDocument","scrollbarWidth","innerWidth","clientWidth","initialBodyPaddingRight","paddingRight","initialBodyComputedPaddingRight","getComputedStyle","containerData","innerHeight","parent","viewerData","max","offsetWidth","offsetHeight","parentData","fulled","viewer","list","items","innerHTML","images","index","alt","getImageURL","item","img","firstElementChild","loadImage","renderList","outerWidth","resetList","initImage","done","footerHeight","footer","viewerWidth","viewerHeight","oldImageData","imageData","sizingImage","imageInitializing","abort","aspectRatio","min","initialImageData","renderImage","marginLeft","marginTop","viewing","zooming","onTransitionEnd","imageRendering","resetImage","parentNode","bind","canvas","onClick","click","onDragStart","dragstart","onPointerDown","pointerdown","onPointerMove","pointermove","onPointerUp","pointerup","onKeyDown","keydown","onResize","resize","onWheel","wheel","passive","capture","onDblclick","dblclick","unbind","target","action","isTrusted","clearTimeout","clickCanvasTimeout","played","exit","full","toggle","reset","prev","next","preventDefault","doubleClickImageTimeout","load","timeout","originalImage","parentWidth","parentHeight","filled","keyCode","which","charCode","ctrlKey","tagName","buttons","showing","hiding","pointerType","changedTouches","touch","identifier","isSwitchable","change","imageClicked","setTimeout","console","log","isShown","close","open","fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement","player","getElementsByTagName","wheeling","delta","deltaY","wheelDelta","immediate","build","transitioning","initialOffsetWidth","hideImmediately","onViewerTransitionEnd","onImageTransitionEnd","zoomTo","querySelector","onViewed","onLoad","complete","maxIndex","move","offsetX","offsetY","moveTo","x","y","changed","hasTooltip","_originalEvent","_zoomable","newWidth","newHeight","oldRatio","originalEvent","offset","center","degree","rotateTo","scale","total","onLoadWhenPlay","requestFullscreen","referrerPolicy","playing","exitFullscreen","tooltipBox","textContent","round","tooltipping","fading","update","isImg","destroy","querySelectorAll","changedIndexes","changedIndex","destroyed","delaying","initializing","onStart","undefined","parseFloat","webkitRequestFullscreen","Element","ALLOW_KEYBOARD_INPUT","mozRequestFullScreen","msRequestFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen","absoluteOffsetX","p","AnotherViewer","Viewer","nodeType","Error","DEFAULTS","init","progress","template","TEMPLATE","custom","zoomButtons","slice","rotateButtons","scaleButtons","deep","size","rotates","position","insertBefore","nextSibling","noConflict","setDefaults","events","handlers","methods","others"],"mappings":"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"}